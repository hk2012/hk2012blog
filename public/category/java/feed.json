{
    "version": "https://jsonfeed.org/version/1",
    "title": "流年印记 • All posts by \"java\" category",
    "description": "数学 & 软件工程",
    "home_page_url": "https://hk2012.github.io",
    "items": [
        {
            "id": "https://hk2012.github.io/2024/04/10/course/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%AD%A6%E4%B9%A0%E5%92%8C%E5%BC%80%E5%8F%91/",
            "url": "https://hk2012.github.io/2024/04/10/course/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%AD%A6%E4%B9%A0%E5%92%8C%E5%BC%80%E5%8F%91/",
            "title": "嵌入式学习和开发",
            "date_published": "2024-04-10T03:10:00.000Z",
            "content_html": "<h2 id=\"基础知识\"><a class=\"anchor\" href=\"#基础知识\">#</a> 基础知识</h2>\n<h3 id=\"常见问题\"><a class=\"anchor\" href=\"#常见问题\">#</a> 常见问题</h3>\n<h4 id=\"数字含义\"><a class=\"anchor\" href=\"#数字含义\">#</a> 数字含义</h4>\n<ul>\n<li>条件判断、逻辑运算等方面的约定俗成的惯例\n<ol>\n<li>1 表示真或者真值。</li>\n<li>0 表示假或者假值。</li>\n</ol>\n</li>\n<li>函数的返回值\n<ol>\n<li>0 表示成功，</li>\n<li>非 0 表示失败</li>\n</ol>\n</li>\n</ul>\n<p>main 函数 return 0, 代表成功还是失败</p>\n<h4 id=\"内存管理\"><a class=\"anchor\" href=\"#内存管理\">#</a> 内存管理</h4>\n<ol start=\"3\">\n<li>\n<p>malloc ()： 用于动态分配内存空间。其原型为 void* malloc (size_t size)，其中 size 参数表示需要分配的字节数。malloc () 返回一个指向分配内存起始地址的指针，如果分配失败，则返回 NULL。</p>\n</li>\n<li>\n<p>calloc ()： 用于动态分配并初始化内存空间。其原型为 void* calloc (size_t num, size_t size)，其中 num 为元素个数，size 为每个元素的大小。calloc () 返回一个指向分配内存起始地址的指针，如果分配失败，则返回 NULL。与 malloc () 不同的是，calloc () 分配的内存会被初始化为零。</p>\n</li>\n<li>\n<p>realloc ()： 用于重新分配已分配内存的大小。其原型为 void* realloc (void* ptr, size_t size)，其中 ptr 是之前分配内存的指针，size 是重新分配的字节数。如果分配成功，则返回一个指向新分配内存起始地址的指针，如果分配失败，则返回 NULL。注意，如果重新分配失败，原始内存块仍然保持不变，不会被释放。</p>\n</li>\n<li>\n<p>free ()： 用于释放动态分配的内存空间。其原型为 void free (void* ptr)，其中 ptr 是需要释放的内存块的指针。一旦释放，该内存块就可以被重新分配或使用。</p>\n<ul>\n<li>代码示例</li>\n</ul>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdlib.h></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">int</span> <span class=\"token operator\">*</span>ptr1<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>ptr2<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>ptr3<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">// 使用 malloc () 分配 5 个整型空间</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    ptr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token function\">malloc</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ptr1 <span class=\"token operator\">==</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"内存分配失败\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token comment\">// 使用 calloc () 分配 3 个整型空间，并初始化为 0</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    ptr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token function\">calloc</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ptr2 <span class=\"token operator\">==</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"内存分配失败\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token function\">free</span><span class=\"token punctuation\">(</span>ptr1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 释放之前分配的内存</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token comment\">// 使用 realloc () 扩展 ptr1 指向的内存空间为 8 个整型</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    ptr3 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token function\">realloc</span><span class=\"token punctuation\">(</span>ptr1<span class=\"token punctuation\">,</span> <span class=\"token number\">8</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ptr3 <span class=\"token operator\">==</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"内存分配失败\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token function\">free</span><span class=\"token punctuation\">(</span>ptr1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 释放之前分配的内存</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token function\">free</span><span class=\"token punctuation\">(</span>ptr2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 释放之前分配的内存</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        ptr1 <span class=\"token operator\">=</span> ptr3<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 使 ptr1 指向扩展后的内存空间</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token comment\">// 释放内存</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token function\">free</span><span class=\"token punctuation\">(</span>ptr1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token function\">free</span><span class=\"token punctuation\">(</span>ptr2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ul>\n<li>\n<p>在这个示例中，我们：</p>\n<ol>\n<li>使用 malloc () 分配了一块大小为 5 个整型的内存空间，并将其指针赋给 ptr1。</li>\n<li>使用 calloc () 分配了一块大小为 3 个整型的内存空间，并将其指针赋给 ptr2。</li>\n<li>使用 realloc () 对 ptr1 指向的内存空间进行了扩展，使其大小为 8 个整型，并将扩展后的指针赋给 ptr3。</li>\n<li>最后，我们释放了分配的内存空间，以避免内存泄漏。</li>\n</ol>\n</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"指针基础知识\"><a class=\"anchor\" href=\"#指针基础知识\">#</a> 指针基础知识</h3>\n<ul>\n<li>\n<p>基础知识：</p>\n<ol>\n<li>指针变量： 指针变量是用来存储内存地址的变量。声明一个指针变量时，需要指定指针变量的类型，表示它所指向的数据的类型。</li>\n<li>取址运算符 (&amp;)： 取址运算符用于获取变量的内存地址。例如，&amp;a 表示变量 a 的地址。</li>\n<li>间接访问运算符 (*)： 间接访问运算符用于获取指针所指向的数据。例如，*ptr 表示获取指针 ptr 所指向的数据。</li>\n<li>空指针 (NULL)： 空指针是一个特殊的指针值，表示不指向任何有效的内存地址。在 C 语言中，可以使用 NULL 宏来表示空指针。</li>\n<li>指针算术： 指针可以进行算术运算，例如加法、减法等，用来移动指针的位置。</li>\n</ol>\n<ul>\n<li>示例：下面是一个关于一级指针和二级指针的示例：<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">int</span> num <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">int</span> <span class=\"token operator\">*</span>ptr1<span class=\"token punctuation\">;</span>  <span class=\"token comment\">// 一级指针</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">int</span> <span class=\"token operator\">*</span><span class=\"token operator\">*</span>ptr2<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 二级指针</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">// 将 num 的地址赋给 ptr1</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    ptr1 <span class=\"token operator\">=</span> <span class=\"token operator\">&amp;</span>num<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token comment\">// 将 ptr1 的地址赋给 ptr2</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    ptr2 <span class=\"token operator\">=</span> <span class=\"token operator\">&amp;</span>ptr1<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token comment\">// 输出 num 的值</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"num 的值为：%d\\n\"</span><span class=\"token punctuation\">,</span> num<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token comment\">// 使用一级指针访问 num 的值</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"通过一级指针访问 num 的值：%d\\n\"</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>ptr1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token comment\">// 使用二级指针访问 num 的值</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"通过二级指针访问 num 的值：%d\\n\"</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span><span class=\"token operator\">*</span>ptr2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ul>\n<li>解释说明\n<ol>\n<li>我们首先声明了一个整型变量 num，并赋值为 10。</li>\n<li>然后声明了一个一级指针 ptr1，将 num 的地址赋给 ptr1。</li>\n<li>接着声明了一个二级指针 ptr2，将 ptr1 的地址赋给 ptr2。</li>\n<li>最后通过一级指针和二级指针分别访问了 num 的值，输出结果相同，都为 10。</li>\n</ol>\n</li>\n</ul>\n</li>\n<li>示例：下面是一个示例，演示了数组指针、函数指针以及容易混淆的指针写法：<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 函数声明</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">int</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> a<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">int</span> <span class=\"token function\">subtract</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> a<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">// 数组指针示例</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">int</span> arr<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">int</span> <span class=\"token operator\">*</span>ptr_arr <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 数组名即为数组首元素的地址，ptr_arr 指向数组 arr 的第一个元素</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"数组第一个元素的值：%d\\n\"</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>ptr_arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 输出数组第一个元素的值</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token comment\">// 函数指针示例</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">int</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>func_ptr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 声明一个指向接受两个整型参数、返回整型的函数指针</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    func_ptr <span class=\"token operator\">=</span> <span class=\"token operator\">&amp;</span>add<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 函数名即为函数的地址，func_ptr 指向函数 add</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"add(3, 4) 的结果：%d\\n\"</span><span class=\"token punctuation\">,</span> <span class=\"token function\">func_ptr</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 调用函数指针执行 add (3, 4)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    func_ptr <span class=\"token operator\">=</span> <span class=\"token operator\">&amp;</span>subtract<span class=\"token punctuation\">;</span> <span class=\"token comment\">//func_ptr 指向函数 subtract</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"subtract(5, 2) 的结果：%d\\n\"</span><span class=\"token punctuation\">,</span> <span class=\"token function\">func_ptr</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 调用函数指针执行 subtract (5, 2)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token comment\">// 容易混淆的指针写法示例</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">int</span> x <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">int</span> <span class=\"token operator\">*</span>ptr1<span class=\"token punctuation\">,</span> ptr2<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 这里 ptr1 是指针变量，ptr2 是整型变量，而不是两个指针变量</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    ptr1 <span class=\"token operator\">=</span> <span class=\"token operator\">&amp;</span>x<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    ptr2 <span class=\"token operator\">=</span> x<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ptr1 指向的值：%d\\n\"</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>ptr1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 输出指针变量 ptr1 指向的值</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ptr2 的值：%d\\n\"</span><span class=\"token punctuation\">,</span> ptr2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 输出整型变量 ptr2 的值</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token comment\">// 函数定义</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token keyword\">int</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> a<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> b<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token keyword\">return</span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token keyword\">int</span> <span class=\"token function\">subtract</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> a<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> b<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token keyword\">return</span> a <span class=\"token operator\">-</span> b<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ul>\n<li>解释说明\n<ol>\n<li>首先定义了一个整型数组 arr，然后声明了一个指向整型数组的指针 ptr_arr，并将数组 arr 的首地址赋值给了 ptr_arr。通过 ptr_arr 指针可以访问数组中的元素。</li>\n<li>然后定义了两个函数 add 和 subtract，用来执行加法和减法操作。接着声明了一个函数指针 func_ptr，并通过赋值将其指向了 add 和 subtract 函数。通过 func_ptr 指针可以动态调用这两个函数。</li>\n<li>最后演示了容易混淆的指针写法，声明了一个指针变量 ptr1 和一个整型变量 ptr2。在这种写法中，需要注意变量的声明方式，以避免产生混淆。</li>\n</ol>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"嵌入式开发的编程语言\"><a class=\"anchor\" href=\"#嵌入式开发的编程语言\">#</a> 嵌入式开发的编程语言</h2>\n<ul>\n<li>\n<p>C 语言：</p>\n<ul>\n<li>优点：<br />\n足够底层，直接操作硬件，对于资源受限的嵌入式系统更加适用。<br />\n通常编译后的代码较小，执行速度较快。<br />\n更接近硬件的抽象层，对于对内存、CPU 等底层资源的控制更为直接。</li>\n<li>缺点：<br />\n缺乏面向对象的特性，不够抽象，有时可能会导致代码复杂度较高。<br />\n不够灵活，需要手动管理内存，容易出现内存泄漏和指针错误。</li>\n</ul>\n</li>\n<li>\n<p>C++：</p>\n<ul>\n<li>优点：<br />\n支持面向对象编程，具有封装、继承和多态等特性，使代码更加模块化和可维护。<br />\n有丰富的标准库和第三方库，提供了更多高级的数据结构和算法。<br />\n拥有更多的编程范式，如模板元编程等，能够提供更好的代码重用和泛化能力。</li>\n<li>缺点：<br />\n生成的代码通常较大，可能会增加系统的资源消耗。<br />\n需要更多的运行时支持，对于资源受限的嵌入式系统可能不够适用。<br />\nC++ 的复杂性可能会导致开发过程更为繁琐，需要更多的学习和理解。</li>\n</ul>\n</li>\n<li>\n<p>综合考虑，对于资源受限的嵌入式系统，或者对性能和资源消耗要求较高的应用场景，C 语言可能更为合适。而对于需要更高层次抽象和更灵活的编程模型的应用，以及对代码的可维护性和可重用性有更高要求的项目，C++ 可能更适合。</p>\n</li>\n<li>\n<p>使用方式</p>\n</li>\n<li>\n<p>浏览模式</p>\n</li>\n<li>\n<p>如何编译</p>\n</li>\n</ul>\n",
            "tags": [
                "项目开发"
            ]
        },
        {
            "id": "https://hk2012.github.io/2024/04/07/java/%E6%89%98%E6%94%B6%E5%85%A8%E6%99%AF%E7%9B%91%E6%8E%A7/",
            "url": "https://hk2012.github.io/2024/04/07/java/%E6%89%98%E6%94%B6%E5%85%A8%E6%99%AF%E7%9B%91%E6%8E%A7/",
            "title": "托收全景监控",
            "date_published": "2024-04-07T03:10:00.000Z",
            "content_html": "<h1 id=\"托收全景监控\"><a class=\"anchor\" href=\"#托收全景监控\">#</a> 托收全景监控</h1>\n<h2 id=\"总览\"><a class=\"anchor\" href=\"#总览\">#</a> 总览</h2>\n<ul>\n<li><img data-src=\"/img/%E8%83%BD%E6%BA%90%E4%BA%92%E8%81%94%E7%BD%91/%E6%89%98%E6%94%B6%E5%85%A8%E6%99%AF%E7%9B%91%E6%8E%A7%E5%9B%BE%E7%AC%AC%E4%B8%80%E7%89%88.png\" alt=\"托收全景监控图第一版\" /></li>\n</ul>\n<h2 id=\"总体情况\"><a class=\"anchor\" href=\"#总体情况\">#</a> 总体情况</h2>\n<h2 id=\"托收投诉意见监控\"><a class=\"anchor\" href=\"#托收投诉意见监控\">#</a> 托收投诉意见监控</h2>\n<h3 id=\"总体预览图\"><a class=\"anchor\" href=\"#总体预览图\">#</a> 总体预览图</h3>\n<ul>\n<li><img data-src=\"/img/%E8%83%BD%E6%BA%90%E4%BA%92%E8%81%94%E7%BD%91/%E6%89%98%E6%94%B6%E6%8A%95%E8%AF%89%E6%84%8F%E8%A7%81%E7%9B%91%E6%8E%A7.png\" alt=\"托收投诉意见监控\" /></li>\n</ul>\n<h2 id=\"托收异常情况\"><a class=\"anchor\" href=\"#托收异常情况\">#</a> 托收异常情况</h2>\n<h2 id=\"托收时间监控\"><a class=\"anchor\" href=\"#托收时间监控\">#</a> 托收时间监控</h2>\n<ul>\n<li><img data-src=\"/img/%E8%83%BD%E6%BA%90%E4%BA%92%E8%81%94%E7%BD%91/%E6%89%98%E6%94%B6%E6%97%B6%E9%97%B4%E7%9B%91%E6%8E%A7.png\" alt=\"托收时间监控\" /></li>\n</ul>\n<h3 id=\"分析阶段\"><a class=\"anchor\" href=\"#分析阶段\">#</a> 分析阶段</h3>\n<ul>\n<li>\n<p>全渠道收费渠道运维日报 sql-v2.3</p>\n<ol>\n<li>\n<p>收费日报汇总分析</p>\n<ul>\n<li>提供的原始 sql 语句</li>\n</ul>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">SELECT</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token string\">'今日0点到18点，全渠道收费渠道共产生交易'</span> <span class=\"token operator\">||</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">CASE</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">WHEN</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">></span> <span class=\"token number\">10000</span> <span class=\"token keyword\">THEN</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        to_char <span class=\"token punctuation\">(</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">/</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'FM999999990.00'</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'万笔'</span> <span class=\"token keyword\">ELSE</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'笔'</span> </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">END</span> <span class=\"token operator\">||</span> <span class=\"token string\">'、金额'</span> <span class=\"token operator\">||</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">CASE</span>   </pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">WHEN</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> a<span class=\"token punctuation\">.</span>charg_amt <span class=\"token punctuation\">)</span><span class=\"token operator\">></span> <span class=\"token number\">100000000</span> <span class=\"token keyword\">THEN</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        to_char <span class=\"token punctuation\">(</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> a<span class=\"token punctuation\">.</span>charg_amt <span class=\"token punctuation\">)</span><span class=\"token operator\">/</span> <span class=\"token number\">100000000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'FM999999990.00'</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'亿元'</span> </pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">WHEN</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> a<span class=\"token punctuation\">.</span>charg_amt <span class=\"token punctuation\">)</span><span class=\"token operator\">></span> <span class=\"token number\">10000</span> <span class=\"token keyword\">THEN</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        to_char <span class=\"token punctuation\">(</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> a<span class=\"token punctuation\">.</span>charg_amt <span class=\"token punctuation\">)</span><span class=\"token operator\">/</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'FM999999990.00'</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'万元'</span> <span class=\"token keyword\">ELSE</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> a<span class=\"token punctuation\">.</span>charg_amt <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'元'</span> </pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">END</span> <span class=\"token operator\">||</span> <span class=\"token string\">'。'</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"收费日报汇总\"</span> </pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">FROM</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    emss_pfc<span class=\"token punctuation\">.</span>charg_acct a </pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">WHERE</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    a<span class=\"token punctuation\">.</span>charg_ym <span class=\"token operator\">=</span> to_char <span class=\"token punctuation\">(</span> sysdate<span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyyMM'</span> <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>charg_date <span class=\"token operator\">>=</span> trunc <span class=\"token punctuation\">(</span> sysdate <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>charg_date <span class=\"token operator\">&lt;=</span> to_date <span class=\"token punctuation\">(</span> to_char <span class=\"token punctuation\">(</span> sysdate<span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyy-MM-dd'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">' 18:00:00'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyy-MM-dd hh24:MI:ss'</span> <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>cap_no <span class=\"token operator\">LIKE</span> <span class=\"token string\">'D%'</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><ul>\n<li>分析结果\n<ol>\n<li>\n<p>涉及表名：emss_pfc.charg_acct</p>\n</li>\n<li>\n<p>查询内容：该查询用于统计从今天零点到今天下午六点 (18:00) 之间，特定渠道产生的收费交易总量和总金额。具体来说，它计算了满足以下条件的收费记录：</p>\n<ul>\n<li>charg_ym = to_char (sysdate, 'yyyyMM')：收费年月与当前日期年月相同</li>\n<li>charg_date &gt;= trunc (sysdate)：收费日期大于等于今天的零点</li>\n<li>charg_date &lt;= to_date ( to_char ( sysdate, 'yyyy-MM-dd') || ' 18:00:00', 'yyyy-MM-dd hh24:MI:ss' )：收费日期小于等于今天的下午六点</li>\n<li>cap_no LIKE 'D%'：渠道编号以 'D' 开头</li>\n</ul>\n</li>\n<li>\n<p>使用的函数：</p>\n<ul>\n<li>count (1)：用于统计符合条件的记录数量</li>\n<li>sum (a.charg_amt)：用于计算符合条件的记录中收费金额的总和</li>\n<li>to_char ()：用于将数值转换为字符串，并指定格式</li>\n<li>round ()：用于对数值进行四舍五入取整</li>\n<li>查询结果：查询结果被取名为 &quot;收费日报汇总&quot;，它包括了两个部分：交易总量和总金额。交易总量根据数量的大小，可能会以 &quot;万笔&quot; - 或者 &quot;笔&quot; 作为单位显示；总金额根据金额的大小，可能会以 &quot;亿元&quot;、&quot;万元&quot; 或者 &quot;元&quot; 作为单位显示。</li>\n</ul>\n</li>\n</ol>\n</li>\n</ul>\n</li>\n<li>\n<p>代扣运维数据分析</p>\n<ul>\n<li>提供的原始 sql 语句</li>\n</ul>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">SELECT</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token string\">'代扣业务出盘'</span> <span class=\"token operator\">||</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> t<span class=\"token punctuation\">.</span>pd_order_id <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'个地市渠道，共'</span> <span class=\"token operator\">||</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">CASE</span>            </pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">WHEN</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> t<span class=\"token punctuation\">.</span>ddct_t_num <span class=\"token punctuation\">)</span><span class=\"token operator\">></span> <span class=\"token number\">10000</span> <span class=\"token keyword\">THEN</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        to_char <span class=\"token punctuation\">(</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> t<span class=\"token punctuation\">.</span>ddct_t_num <span class=\"token punctuation\">)</span><span class=\"token operator\">/</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'FM999999990.00'</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'万笔'</span> <span class=\"token keyword\">ELSE</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> t<span class=\"token punctuation\">.</span>ddct_t_num <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'笔'</span> </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">END</span> <span class=\"token operator\">||</span> <span class=\"token string\">'电费、金额'</span> <span class=\"token operator\">||</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">CASE</span>              </pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">WHEN</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> t<span class=\"token punctuation\">.</span>ddct_t_amt <span class=\"token punctuation\">)</span><span class=\"token operator\">></span> <span class=\"token number\">100000000</span> <span class=\"token keyword\">THEN</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        to_char <span class=\"token punctuation\">(</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> t<span class=\"token punctuation\">.</span>ddct_t_amt <span class=\"token punctuation\">)</span><span class=\"token operator\">/</span> <span class=\"token number\">100000000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'FM999999990.00'</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'亿元'</span> </pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">WHEN</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> t<span class=\"token punctuation\">.</span>ddct_t_amt <span class=\"token punctuation\">)</span><span class=\"token operator\">></span> <span class=\"token number\">10000</span> <span class=\"token keyword\">THEN</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        to_char <span class=\"token punctuation\">(</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> t<span class=\"token punctuation\">.</span>ddct_t_amt <span class=\"token punctuation\">)</span><span class=\"token operator\">/</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'FM999999990.00'</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'万元'</span> <span class=\"token keyword\">ELSE</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> t<span class=\"token punctuation\">.</span>ddct_t_amt <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'元'</span> </pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">END</span> <span class=\"token operator\">||</span> <span class=\"token string\">'，回盘'</span> <span class=\"token operator\">||</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        decode<span class=\"token punctuation\">(</span> t<span class=\"token punctuation\">.</span>ddct_stat<span class=\"token punctuation\">,</span> <span class=\"token string\">'02'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">NULL</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'个地市渠道（锁定在途'</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> t<span class=\"token punctuation\">.</span>pd_order_id <span class=\"token punctuation\">)</span><span class=\"token operator\">-</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        decode<span class=\"token punctuation\">(</span> t<span class=\"token punctuation\">.</span>ddct_stat<span class=\"token punctuation\">,</span> <span class=\"token string\">'02'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">NULL</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'个、退款中'</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">SELECT</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">FROM</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        emss_pfc<span class=\"token punctuation\">.</span>pd_acct n </pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">WHERE</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        n<span class=\"token punctuation\">.</span>pd_order_id <span class=\"token operator\">IN</span> <span class=\"token punctuation\">(</span> <span class=\"token keyword\">SELECT</span> o<span class=\"token punctuation\">.</span>pd_order_id <span class=\"token keyword\">FROM</span> emss_pfc<span class=\"token punctuation\">.</span>pd_order o <span class=\"token keyword\">WHERE</span> o<span class=\"token punctuation\">.</span>ddct_strt_date <span class=\"token operator\">>=</span> trunc <span class=\"token punctuation\">(</span> sysdate <span class=\"token punctuation\">)</span> <span class=\"token operator\">AND</span> o<span class=\"token punctuation\">.</span>ddct_mode <span class=\"token operator\">=</span> <span class=\"token string\">'03'</span> <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token operator\">AND</span> n<span class=\"token punctuation\">.</span>fail_reason <span class=\"token operator\">IN</span> <span class=\"token punctuation\">(</span> <span class=\"token string\">'F00001'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'笔），'</span> <span class=\"token operator\">||</span> <span class=\"token string\">'代扣成功'</span> <span class=\"token operator\">||</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">SELECT</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token keyword\">CASE</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            </pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token keyword\">WHEN</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">></span> <span class=\"token number\">10000</span> <span class=\"token keyword\">THEN</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>                to_char <span class=\"token punctuation\">(</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">/</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'FM999999990.00'</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'万笔'</span> <span class=\"token keyword\">ELSE</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'笔'</span> </pre></td></tr><tr><td data-num=\"29\"></td><td><pre>                <span class=\"token keyword\">END</span> <span class=\"token operator\">||</span> <span class=\"token string\">'、金额'</span> <span class=\"token operator\">||</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token keyword\">CASE</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>                </pre></td></tr><tr><td data-num=\"32\"></td><td><pre>                <span class=\"token keyword\">WHEN</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> n<span class=\"token punctuation\">.</span>charg_amt <span class=\"token punctuation\">)</span><span class=\"token operator\">></span> <span class=\"token number\">100000000</span> <span class=\"token keyword\">THEN</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>                to_char <span class=\"token punctuation\">(</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> n<span class=\"token punctuation\">.</span>charg_amt <span class=\"token punctuation\">)</span><span class=\"token operator\">/</span> <span class=\"token number\">100000000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'FM999999990.00'</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'亿元'</span> </pre></td></tr><tr><td data-num=\"34\"></td><td><pre>                <span class=\"token keyword\">WHEN</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> n<span class=\"token punctuation\">.</span>charg_amt <span class=\"token punctuation\">)</span><span class=\"token operator\">></span> <span class=\"token number\">10000</span> <span class=\"token keyword\">THEN</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>                to_char <span class=\"token punctuation\">(</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> n<span class=\"token punctuation\">.</span>charg_amt <span class=\"token punctuation\">)</span><span class=\"token operator\">/</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'FM999999990.00'</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'万元'</span> <span class=\"token keyword\">ELSE</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> n<span class=\"token punctuation\">.</span>charg_amt <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'元'</span> </pre></td></tr><tr><td data-num=\"36\"></td><td><pre>            <span class=\"token keyword\">END</span> </pre></td></tr><tr><td data-num=\"37\"></td><td><pre>            <span class=\"token keyword\">FROM</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>                emss_pfc<span class=\"token punctuation\">.</span>charg_acct n </pre></td></tr><tr><td data-num=\"39\"></td><td><pre>            <span class=\"token keyword\">WHERE</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>                n<span class=\"token punctuation\">.</span>charg_ym <span class=\"token operator\">=</span> to_char <span class=\"token punctuation\">(</span> sysdate<span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyyMM'</span> <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"41\"></td><td><pre>                <span class=\"token operator\">AND</span> n<span class=\"token punctuation\">.</span>charg_date <span class=\"token operator\">>=</span> trunc <span class=\"token punctuation\">(</span> sysdate <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"42\"></td><td><pre>                <span class=\"token operator\">AND</span> n<span class=\"token punctuation\">.</span>charg_date <span class=\"token operator\">&lt;=</span> to_date <span class=\"token punctuation\">(</span> to_char <span class=\"token punctuation\">(</span> sysdate<span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyy-MM-dd'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">' 18:00:00'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyy-MM-dd hh24:MI:ss'</span> <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"43\"></td><td><pre>                <span class=\"token operator\">AND</span> n<span class=\"token punctuation\">.</span>cap_no <span class=\"token operator\">LIKE</span> <span class=\"token string\">'%PLDK%'</span> </pre></td></tr><tr><td data-num=\"44\"></td><td><pre>                <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'，成功率约'</span> <span class=\"token operator\">||</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>            <span class=\"token keyword\">CASE</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>                    </pre></td></tr><tr><td data-num=\"47\"></td><td><pre>                    <span class=\"token keyword\">WHEN</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> <span class=\"token number\">100</span> <span class=\"token operator\">*</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> decode<span class=\"token punctuation\">(</span> t<span class=\"token punctuation\">.</span>ddct_stat<span class=\"token punctuation\">,</span> <span class=\"token string\">'02'</span><span class=\"token punctuation\">,</span> t<span class=\"token punctuation\">.</span>actl_ddct_t_num<span class=\"token punctuation\">,</span> <span class=\"token string\">'0'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> t<span class=\"token punctuation\">.</span>ddct_t_num <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">>=</span> <span class=\"token number\">1</span> <span class=\"token keyword\">THEN</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>                    to_char <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>                        <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> <span class=\"token number\">100</span> <span class=\"token operator\">*</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> decode<span class=\"token punctuation\">(</span> t<span class=\"token punctuation\">.</span>ddct_stat<span class=\"token punctuation\">,</span> <span class=\"token string\">'02'</span><span class=\"token punctuation\">,</span> t<span class=\"token punctuation\">.</span>actl_ddct_t_num<span class=\"token punctuation\">,</span> <span class=\"token string\">'0'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> t<span class=\"token punctuation\">.</span>ddct_t_num <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>                        <span class=\"token string\">'FM999999990.00'</span> </pre></td></tr><tr><td data-num=\"51\"></td><td><pre>                        <span class=\"token punctuation\">)</span> <span class=\"token keyword\">ELSE</span> to_char <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>                        <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> <span class=\"token number\">100</span> <span class=\"token operator\">*</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> decode<span class=\"token punctuation\">(</span> t<span class=\"token punctuation\">.</span>ddct_stat<span class=\"token punctuation\">,</span> <span class=\"token string\">'02'</span><span class=\"token punctuation\">,</span> t<span class=\"token punctuation\">.</span>actl_ddct_t_num<span class=\"token punctuation\">,</span> <span class=\"token string\">'0'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> t<span class=\"token punctuation\">.</span>ddct_t_num <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>                        <span class=\"token string\">'FM999999990D99'</span> </pre></td></tr><tr><td data-num=\"54\"></td><td><pre>                    <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"55\"></td><td><pre>                <span class=\"token keyword\">END</span> <span class=\"token operator\">||</span> <span class=\"token string\">'%。'</span> </pre></td></tr><tr><td data-num=\"56\"></td><td><pre>            <span class=\"token punctuation\">)</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"代扣运维日报\"</span> </pre></td></tr><tr><td data-num=\"57\"></td><td><pre>        <span class=\"token keyword\">FROM</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>            emss_pfc<span class=\"token punctuation\">.</span>pd_order t </pre></td></tr><tr><td data-num=\"59\"></td><td><pre>        <span class=\"token keyword\">WHERE</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>            t<span class=\"token punctuation\">.</span>ddct_strt_date <span class=\"token operator\">>=</span> trunc <span class=\"token punctuation\">(</span> sysdate <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"61\"></td><td><pre>            <span class=\"token operator\">AND</span> t<span class=\"token punctuation\">.</span>ddct_strt_date <span class=\"token operator\">&lt;=</span> to_date <span class=\"token punctuation\">(</span> to_char <span class=\"token punctuation\">(</span> sysdate<span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyy-MM-dd'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">' 18:00:00'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyy-MM-dd hh24:MI:ss'</span> <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"62\"></td><td><pre>            <span class=\"token operator\">AND</span> t<span class=\"token punctuation\">.</span>ddct_mode <span class=\"token operator\">=</span> <span class=\"token string\">'03'</span> </pre></td></tr><tr><td data-num=\"63\"></td><td><pre>    <span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>    t<span class=\"token punctuation\">.</span>ddct_mode<span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n<li>\n<p>代收运维数据</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">WITH</span> total <span class=\"token keyword\">AS</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">SELECT</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span> <span class=\"token keyword\">AS</span> all_count<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">CASE</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token keyword\">WHEN</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> a<span class=\"token punctuation\">.</span>charg_amt <span class=\"token punctuation\">)</span><span class=\"token operator\">></span> <span class=\"token number\">100000000</span> <span class=\"token keyword\">THEN</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            to_char <span class=\"token punctuation\">(</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> a<span class=\"token punctuation\">.</span>charg_amt <span class=\"token punctuation\">)</span><span class=\"token operator\">/</span> <span class=\"token number\">100000000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'FM999999990.00'</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'亿元'</span> </pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token keyword\">WHEN</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> a<span class=\"token punctuation\">.</span>charg_amt <span class=\"token punctuation\">)</span><span class=\"token operator\">></span> <span class=\"token number\">10000</span> <span class=\"token keyword\">THEN</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            to_char <span class=\"token punctuation\">(</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> a<span class=\"token punctuation\">.</span>charg_amt <span class=\"token punctuation\">)</span><span class=\"token operator\">/</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'FM999999990.00'</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'万元'</span> <span class=\"token keyword\">ELSE</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> a<span class=\"token punctuation\">.</span>charg_amt <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'元'</span> </pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">END</span> <span class=\"token keyword\">AS</span> sum_amt<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">CASE</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            </pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token keyword\">WHEN</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">></span> <span class=\"token number\">10000</span> <span class=\"token keyword\">THEN</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            to_char <span class=\"token punctuation\">(</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">/</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'FM999999990.00'</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'万笔'</span> <span class=\"token keyword\">ELSE</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'笔'</span> </pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">END</span> <span class=\"token keyword\">AS</span> sum_count </pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">FROM</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        emss_pfc<span class=\"token punctuation\">.</span>charg_acct a </pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">WHERE</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        a<span class=\"token punctuation\">.</span>charg_ym <span class=\"token operator\">=</span> to_char <span class=\"token punctuation\">(</span> sysdate<span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyyMM'</span> <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>charg_date <span class=\"token operator\">>=</span> trunc <span class=\"token punctuation\">(</span> sysdate <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>charg_date <span class=\"token operator\">&lt;=</span> to_date <span class=\"token punctuation\">(</span> to_char <span class=\"token punctuation\">(</span> sysdate<span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyy-MM-dd'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">' 18:00:00'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyy-MM-dd hh24:MI:ss'</span> <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>cap_no <span class=\"token operator\">LIKE</span> <span class=\"token string\">'D%CZ%'</span> </pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    zfb <span class=\"token keyword\">AS</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token keyword\">SELECT</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span> <span class=\"token keyword\">AS</span> zfb_count<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token keyword\">CASE</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            </pre></td></tr><tr><td data-num=\"29\"></td><td><pre>            <span class=\"token keyword\">WHEN</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">></span> <span class=\"token number\">10000</span> <span class=\"token keyword\">THEN</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>            to_char <span class=\"token punctuation\">(</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">/</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'FM999999990.00'</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'万笔'</span> <span class=\"token keyword\">ELSE</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'笔'</span> </pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token keyword\">END</span> <span class=\"token operator\">||</span> <span class=\"token string\">'、'</span> <span class=\"token keyword\">AS</span> zfb_sum </pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token keyword\">FROM</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        emss_pfc<span class=\"token punctuation\">.</span>charg_acct a </pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token keyword\">WHERE</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        a<span class=\"token punctuation\">.</span>charg_ym <span class=\"token operator\">=</span> to_char <span class=\"token punctuation\">(</span> sysdate<span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyyMM'</span> <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>charg_date <span class=\"token operator\">>=</span> trunc <span class=\"token punctuation\">(</span> sysdate <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>charg_date <span class=\"token operator\">&lt;=</span> to_date <span class=\"token punctuation\">(</span> to_char <span class=\"token punctuation\">(</span> sysdate<span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyy-MM-dd'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">' 18:00:00'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyy-MM-dd hh24:MI:ss'</span> <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>cap_no <span class=\"token operator\">LIKE</span> <span class=\"token string\">'DZFB32%CZ%'</span> </pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    wxgd <span class=\"token keyword\">AS</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token keyword\">SELECT</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span> <span class=\"token keyword\">AS</span> wxgd_count<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token keyword\">CASE</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>            </pre></td></tr><tr><td data-num=\"45\"></td><td><pre>            <span class=\"token keyword\">WHEN</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">></span> <span class=\"token number\">10000</span> <span class=\"token keyword\">THEN</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>            to_char <span class=\"token punctuation\">(</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">/</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'FM999999990.00'</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'万笔'</span> <span class=\"token keyword\">ELSE</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'笔'</span> </pre></td></tr><tr><td data-num=\"47\"></td><td><pre>        <span class=\"token keyword\">END</span> <span class=\"token operator\">||</span> <span class=\"token string\">'、'</span> <span class=\"token keyword\">AS</span> wxgd_sum </pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token keyword\">FROM</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>        emss_pfc<span class=\"token punctuation\">.</span>charg_acct a </pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    <span class=\"token keyword\">WHERE</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>        a<span class=\"token punctuation\">.</span>charg_ym <span class=\"token operator\">=</span> to_char <span class=\"token punctuation\">(</span> sysdate<span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyyMM'</span> <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"52\"></td><td><pre>        <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>charg_date <span class=\"token operator\">>=</span> trunc <span class=\"token punctuation\">(</span> sysdate <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"53\"></td><td><pre>        <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>charg_date <span class=\"token operator\">&lt;=</span> to_date <span class=\"token punctuation\">(</span> to_char <span class=\"token punctuation\">(</span> sysdate<span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyy-MM-dd'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">' 18:00:00'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyy-MM-dd hh24:MI:ss'</span> <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"54\"></td><td><pre>        <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>cap_no <span class=\"token operator\">LIKE</span> <span class=\"token string\">'DWX32%CZ%'</span> </pre></td></tr><tr><td data-num=\"55\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    wxdeb <span class=\"token keyword\">AS</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    <span class=\"token keyword\">SELECT</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>        <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span> <span class=\"token keyword\">AS</span> wxdeb_count<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>    <span class=\"token keyword\">CASE</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>            </pre></td></tr><tr><td data-num=\"61\"></td><td><pre>            <span class=\"token keyword\">WHEN</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">></span> <span class=\"token number\">10000</span> <span class=\"token keyword\">THEN</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>            to_char <span class=\"token punctuation\">(</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">/</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'FM999999990.00'</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'万笔'</span> <span class=\"token keyword\">ELSE</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'笔'</span> </pre></td></tr><tr><td data-num=\"63\"></td><td><pre>        <span class=\"token keyword\">END</span> <span class=\"token operator\">||</span> <span class=\"token string\">'、'</span> <span class=\"token keyword\">AS</span> wxdeb_sum </pre></td></tr><tr><td data-num=\"64\"></td><td><pre>    <span class=\"token keyword\">FROM</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>        emss_pfc<span class=\"token punctuation\">.</span>charg_acct a </pre></td></tr><tr><td data-num=\"66\"></td><td><pre>    <span class=\"token keyword\">WHERE</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>        a<span class=\"token punctuation\">.</span>charg_ym <span class=\"token operator\">=</span> to_char <span class=\"token punctuation\">(</span> sysdate<span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyyMM'</span> <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"68\"></td><td><pre>        <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>charg_date <span class=\"token operator\">>=</span> trunc <span class=\"token punctuation\">(</span> sysdate <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"69\"></td><td><pre>        <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>charg_date <span class=\"token operator\">&lt;=</span> to_date <span class=\"token punctuation\">(</span> to_char <span class=\"token punctuation\">(</span> sysdate<span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyy-MM-dd'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">' 18:00:00'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyy-MM-dd hh24:MI:ss'</span> <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"70\"></td><td><pre>        <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>cap_no <span class=\"token operator\">LIKE</span> <span class=\"token string\">'DDEB32%CZ%'</span> </pre></td></tr><tr><td data-num=\"71\"></td><td><pre>    <span class=\"token punctuation\">)</span> <span class=\"token keyword\">SELECT</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>    <span class=\"token string\">'代收业务销账成功'</span> <span class=\"token operator\">||</span> t<span class=\"token punctuation\">.</span>sum_count <span class=\"token operator\">||</span> <span class=\"token string\">'、金额'</span> <span class=\"token operator\">||</span> t<span class=\"token punctuation\">.</span>sum_amt <span class=\"token operator\">||</span> <span class=\"token string\">'，其中支付宝'</span> <span class=\"token operator\">||</span> zfb<span class=\"token punctuation\">.</span>zfb_sum <span class=\"token operator\">||</span> <span class=\"token string\">'占比'</span> <span class=\"token operator\">||</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> zfb<span class=\"token punctuation\">.</span>zfb_count <span class=\"token operator\">/</span> t<span class=\"token punctuation\">.</span>all_count <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'%，'</span> <span class=\"token operator\">||</span> <span class=\"token string\">'微信(光大)'</span> <span class=\"token operator\">||</span> wxgd<span class=\"token punctuation\">.</span>wxgd_sum <span class=\"token operator\">||</span> <span class=\"token string\">'占比'</span> <span class=\"token operator\">||</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> wxgd<span class=\"token punctuation\">.</span>wxgd_count <span class=\"token operator\">/</span> t<span class=\"token punctuation\">.</span>all_count <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'%，'</span> <span class=\"token operator\">||</span> <span class=\"token string\">'微信(电e宝)'</span> <span class=\"token operator\">||</span> wxdeb<span class=\"token punctuation\">.</span>wxdeb_sum <span class=\"token operator\">||</span> <span class=\"token string\">'占比'</span> <span class=\"token operator\">||</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> wxdeb<span class=\"token punctuation\">.</span>wxdeb_count <span class=\"token operator\">/</span> t<span class=\"token punctuation\">.</span>all_count <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">||</span> <span class=\"token string\">'%。'</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"代收运维日报\"</span> </pre></td></tr><tr><td data-num=\"73\"></td><td><pre><span class=\"token keyword\">FROM</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>    total t</pre></td></tr><tr><td data-num=\"75\"></td><td><pre>    <span class=\"token keyword\">CROSS</span> <span class=\"token keyword\">JOIN</span> zfb</pre></td></tr><tr><td data-num=\"76\"></td><td><pre>    <span class=\"token keyword\">CROSS</span> <span class=\"token keyword\">JOIN</span> wxgd</pre></td></tr><tr><td data-num=\"77\"></td><td><pre>    <span class=\"token keyword\">CROSS</span> <span class=\"token keyword\">JOIN</span> wxdeb<span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n</ol>\n</li>\n</ul>\n<h3 id=\"托收运维数据\"><a class=\"anchor\" href=\"#托收运维数据\">#</a> <span class=\"rainbow\">托收</span>运维数据</h3>\n<ul>\n<li>提供的原始 sql 语句<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">SELECT</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token string\">'托收业务共发送'</span> <span class=\"token operator\">||</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">CASE</span>              </pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">WHEN</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">10000</span> <span class=\"token keyword\">THEN</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        to_char <span class=\"token punctuation\">(</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'FM999999990.00'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">'万笔'</span> <span class=\"token keyword\">ELSE</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">'笔'</span> </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">END</span> <span class=\"token operator\">||</span> <span class=\"token string\">'、金额'</span> <span class=\"token operator\">||</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">CASE</span>       </pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">WHEN</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> t<span class=\"token punctuation\">.</span>actl_ddct_t_amt <span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">100000000</span> <span class=\"token keyword\">THEN</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        to_char <span class=\"token punctuation\">(</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> t<span class=\"token punctuation\">.</span>actl_ddct_t_amt <span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">100000000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'FM999999990.00'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">'亿元'</span> </pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">WHEN</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> t<span class=\"token punctuation\">.</span>actl_ddct_t_amt <span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">10000</span> <span class=\"token keyword\">THEN</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        to_char <span class=\"token punctuation\">(</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> t<span class=\"token punctuation\">.</span>actl_ddct_t_amt <span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'FM999999990.00'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">'万元'</span> <span class=\"token keyword\">ELSE</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> t<span class=\"token punctuation\">.</span>actl_ddct_t_amt <span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">'元'</span> </pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">END</span> <span class=\"token operator\">||</span> <span class=\"token string\">'，'</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"托收运维日报 - 发送、销账、在途\"</span> </pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">FROM</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    emss_pfc<span class=\"token punctuation\">.</span>pd_order t </pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">WHERE</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    t<span class=\"token punctuation\">.</span>ddct_strt_date <span class=\"token operator\">>=</span> trunc <span class=\"token punctuation\">(</span> sysdate <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token operator\">AND</span> t<span class=\"token punctuation\">.</span>ddct_strt_date <span class=\"token operator\">&lt;=</span> to_date <span class=\"token punctuation\">(</span> to_char <span class=\"token punctuation\">(</span> sysdate<span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyy-MM-dd'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">' 18:00:00'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyy-MM-dd hh24:MI:ss'</span> <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token operator\">AND</span> t<span class=\"token punctuation\">.</span>ddct_mode <span class=\"token operator\">=</span> <span class=\"token string\">'0204'</span> </pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    t<span class=\"token punctuation\">.</span>ddct_mode </pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">UNION</span> <span class=\"token keyword\">ALL</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">SELECT</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token string\">'销账成功'</span> <span class=\"token operator\">||</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">CASE</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token keyword\">WHEN</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">10000</span> <span class=\"token keyword\">THEN</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        to_char <span class=\"token punctuation\">(</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'FM999999990.00'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">'万笔'</span> <span class=\"token keyword\">ELSE</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">'笔'</span> </pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token keyword\">END</span> <span class=\"token operator\">||</span> <span class=\"token string\">'、金额'</span> <span class=\"token operator\">||</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token keyword\">CASE</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token keyword\">WHEN</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> a<span class=\"token punctuation\">.</span>charg_amt <span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">100000000</span> <span class=\"token keyword\">THEN</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        to_char <span class=\"token punctuation\">(</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> a<span class=\"token punctuation\">.</span>charg_amt <span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">100000000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'FM999999990.00'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">'亿元'</span> </pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token keyword\">WHEN</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> a<span class=\"token punctuation\">.</span>charg_amt <span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">10000</span> <span class=\"token keyword\">THEN</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        to_char <span class=\"token punctuation\">(</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> a<span class=\"token punctuation\">.</span>charg_amt <span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'FM999999990.00'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">'万元'</span> <span class=\"token keyword\">ELSE</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> a<span class=\"token punctuation\">.</span>charg_amt <span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">'元'</span> </pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token keyword\">END</span> <span class=\"token operator\">||</span> <span class=\"token string\">'，'</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"托收运维日报 - 销账\"</span> </pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token keyword\">FROM</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    emss_pfc<span class=\"token punctuation\">.</span>charg_acct a</pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token keyword\">INNER</span> <span class=\"token keyword\">JOIN</span> emss_pfc<span class=\"token punctuation\">.</span>pay_chan b <span class=\"token keyword\">ON</span> b<span class=\"token punctuation\">.</span>chan_no <span class=\"token operator\">=</span> a<span class=\"token punctuation\">.</span>chan_no </pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token keyword\">WHERE</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    a<span class=\"token punctuation\">.</span>charg_ym <span class=\"token operator\">=</span> to_char <span class=\"token punctuation\">(</span> sysdate<span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyyMM'</span> <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>charg_date <span class=\"token operator\">>=</span> trunc <span class=\"token punctuation\">(</span> sysdate <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>charg_date <span class=\"token operator\">&lt;=</span> to_date <span class=\"token punctuation\">(</span> to_char <span class=\"token punctuation\">(</span> sysdate<span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyy-MM-dd'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">' 18:00:00'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyy-MM-dd hh24:MI:ss'</span> <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>cap_no <span class=\"token operator\">LIKE</span> b<span class=\"token punctuation\">.</span>chan_no <span class=\"token operator\">||</span> <span class=\"token string\">'DZTS%'</span> </pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token keyword\">UNION</span> <span class=\"token keyword\">ALL</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token keyword\">SELECT</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token string\">'锁定在途'</span> <span class=\"token operator\">||</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">'笔。'</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"托收运维日报 - 锁定在途\"</span> </pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token keyword\">FROM</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    emss_pfc<span class=\"token punctuation\">.</span>pd_order a</pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    <span class=\"token keyword\">INNER</span> <span class=\"token keyword\">JOIN</span> emss_pfc<span class=\"token punctuation\">.</span>pay_chan b <span class=\"token keyword\">ON</span> b<span class=\"token punctuation\">.</span>chan_no <span class=\"token operator\">=</span> a<span class=\"token punctuation\">.</span>chan_no </pre></td></tr><tr><td data-num=\"52\"></td><td><pre><span class=\"token keyword\">WHERE</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    a<span class=\"token punctuation\">.</span>ddct_stat <span class=\"token operator\">=</span> <span class=\"token string\">'01'</span> </pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>ddct_mode <span class=\"token operator\">=</span> <span class=\"token string\">'0204'</span> </pre></td></tr><tr><td data-num=\"55\"></td><td><pre>    <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>ddct_strt_date <span class=\"token operator\">>=</span> trunc <span class=\"token punctuation\">(</span> sysdate <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>ddct_strt_date <span class=\"token operator\">&lt;=</span> to_date <span class=\"token punctuation\">(</span> to_char <span class=\"token punctuation\">(</span> sysdate<span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyy-MM-dd'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">' 18:00:00'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyy-MM-dd hh24:MI:ss'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n<li>分析结果\n<ul>\n<li>\n<p>涉及表名：</p>\n<ol>\n<li>emss_pfc.pd_order：批扣订单表，包含了代扣业务的订单信息。 <span class=\"label\">oracle DB3</span></li>\n</ol>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>pd_order<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>pd_order_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'委托扣款单标识是指委托扣款单的唯一标识'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>ddct_exp_categ<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'扣款费用类别是指委托扣款的费用类别，引用国家电网公司营销管理代码类集：扣款费用类别，枚举值，如后付费、分次划拨、费控等'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>ddct_mode<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'扣款方式是指委托扣款的方式，引用国家电网公司营销管理代码类集：扣款方式，枚举值，如普通托收、电子托收、代扣'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>chan_no<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'渠道编号是指渠道对象的唯一编码，此处指委托扣款单关联的渠道'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>ddct_t_num<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'扣款总笔数是指委托扣款的总笔数'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>ddct_t_amt<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">decimal</span><span class=\"token punctuation\">(</span><span class=\"token number\">18</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'扣款总额是指委托扣款的总金额'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>ddct_stat<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'扣款状态是指委托扣款的扣款状态，引用国家电网公司营销管理代码类集：扣款状态，枚举值，如在途、成功、失败'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>actl_ddct_t_num<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'实际扣款户数是指实际扣款的总户数'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>actl_ddct_t_amt<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">decimal</span><span class=\"token punctuation\">(</span><span class=\"token number\">18</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'实际扣款总额是指实际扣款的总金额'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>ddct_init<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'扣款发起人是指委托扣款的发起人员'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>ddct_strt_date<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">datetime</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'扣款发起日期是指委托扣款的发起日期'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>ddct_acmp_date<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">datetime</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'扣款完成日期是指委托扣款的完成日期'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>ddct_batch_no<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">48</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'扣款批次号是指委托扣款的批次号'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>mgt_org_code<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'管理单位编码是指管理单位的唯一编码，此处是指委托扣款单的管理单位编码'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>chan_cls<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'渠道分类是指委托扣款的渠道分类，如工商银行、农业银行等'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>cap_no<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'资金编号是指解款记录的唯一编码'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>agrt_no<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'协议编号是指委托扣款协议的编号'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>bank_acct<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'银行账号是指客户开设的银行账号'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>fail_reason<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'失败原因指委托扣款的失败原因'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>file_name<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">512</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'文件名是指代扣出盘文件的名称'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>file_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'文档服务器文件唯一标识'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>ntce_no<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'记录通知的进账单编号信息，用于资金勾对'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>pay_main_type<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'支付账户的支付主体类型，如：财政客户、普通客户。'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>pd_order_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>IDX_PDORDER_CPNO<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>cap_no<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>IDX_PDORDER_DDCTBATCHNO<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>ddct_batch_no<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>IDX_PD_ORDER_DDCT_STRT_DATE<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>ddct_strt_date<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>IDX_PD_ORDER_MGT_ORG_CODE<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>mgt_org_code<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token punctuation\">)</span> <span class=\"token keyword\">ENGINE</span><span class=\"token operator\">=</span><span class=\"token keyword\">InnoDB</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CHARSET</span><span class=\"token operator\">=</span>utf8mb4 <span class=\"token keyword\">COMMENT</span><span class=\"token operator\">=</span><span class=\"token string\">'委托扣款单是指企业依据委托扣款协议，根据扣款策略，将委托扣款数据发送至委托扣款单位，由委托扣款单位从用户账户中扣划资金并通知企业完成销账的申请单；委托扣款单实体包含扣款费用类别、扣款方式、扣款总笔数、扣款总额、扣款状态、实际扣款笔数、实际扣款总额等属性；由委托扣款出盘业务产生；主要用于记录委托扣款的情况'</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><ol start=\"2\">\n<li>emss_pfc.charg_acct：收费记录表 用于记录交费台账信息 <span class=\"label\">oracle DB3</span></li>\n</ol>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>charg_acct<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>charg_acct_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'交费台账标识是指交费台账的唯一标识'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>cash_chk_rec_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'解款记录标识是指解款记录的唯一标识'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>srv_kind<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'服务种类是指充值卡所属的服务种类，引用国家电网公司营销管理代码类集：服务种类，枚举值，如电类、水类、气类、热类、电动汽车、综合能源'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>cust_no<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'客户编号是指客户的唯一编码'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>charg_ym<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'收费年月是指该笔交费记录产生时所在的年月，格式为YYYYMM'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>charg_date<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">datetime</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'收费日期是指该笔交费记录的收费日期，格式为YYYY/MM/DD HH24:MI:SS'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>charg_type<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'收费类型是指该笔交费记录的收费类型，引用国家电网公司营销管理代码类集：收费类型，枚举值，如收费、收电费、收业务费、坏账核销、冲正、冲正电费、冲正业务费、退费、退电费、退业务费、退预收费、内部往来、预收冲抵、退费转预收、电费转预收、预收互转'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>charg_amt<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">decimal</span><span class=\"token punctuation\">(</span><span class=\"token number\">18</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'收费金额是指该笔交费记录的收费金额'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>charg_stf<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'收费人员指该笔交费记录的收费人员'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>this_lvling_amt<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">decimal</span><span class=\"token punctuation\">(</span><span class=\"token number\">18</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'本次调尾是指该笔交费记录的本次调尾'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>last_lvling_amt<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">decimal</span><span class=\"token punctuation\">(</span><span class=\"token number\">18</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'上次调尾指该笔交费记录的上次调尾'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>charg_dept<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'收费部门是指该笔交费记录的收费部门'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>charg_org<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'收费单位是指该笔交费记录的收费单位'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>pay_mode<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'支付方式是指该笔交费记录的支付方式，引用国家电网公司营销管理代码类集：支付方式，枚举值，如现金、转账支票、本票、银行承兑汇票、商业承兑汇票、POS机刷卡、微信支付、支付宝支付、电e宝支付、充值卡充值、到账单、进账单、常用能源卡、临时能源卡、网银支付、快捷支付'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>pay_chan<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'交费渠道是指该笔交费记录的交费渠道，引用国家电网公司营销管理代码类集：交费渠道，枚举值，如电力机构、电力网点交费、移动作业终端交费、自助终端交费、网上国网交费、社会网点交费、能源卡'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>pay_order_no<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'支付单编号是指支付单的唯一编码，支付单编号规则：8位年月日+2位省（市）码+18位流水'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>cap_no<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'资金编号是解款记录的唯一编码'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>branch_code<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'网点代码是指该笔交费记录交费网点的代码'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>trans_run_acct_no<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'交易流水号是指该笔交费记录的流水号'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>acct_no<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'记账编号是指明细记账凭证的唯一编码，触发会计事务制作会计分录时，用于获取费用金额，记账编号生成规则为8位年月日+10位流水号'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>acct_ym<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'记账年月是指该笔交费记录所在的记帐年月'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>charg_daily_setl_rec_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'收费日结记录标识是指收费日结记录的唯一标识'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>rela_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'关联标识是指发生冲正、预收互转等业务时记录关联的交费台账标识'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>remark<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'备注是指该笔交费记录需要备注的内容'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>mgt_org_code<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'管理单位编码是指管理单位的唯一编码，此处是指交费台账所属的管理单位编码'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>pay_order_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'支付单标识是指支付单的唯一标识'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>setl_acct_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'合同账户标识是指合同账户的唯一标识'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>prtr_no<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'伙伴编号是指业务伙伴的唯一编码'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>this_bal<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">decimal</span><span class=\"token punctuation\">(</span><span class=\"token number\">18</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'本次结余是指该笔交费台账发生后对应合同账户的账户余额'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>last_bal<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">decimal</span><span class=\"token punctuation\">(</span><span class=\"token number\">18</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'上次结余是指指该笔交费台账发生前对应合同账户的账户余额'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>chan_no<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'渠道编号是指渠道实体的唯一编码，此处是指交费台账关联的渠道编号'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>batch_pay_rec_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'批量交费记录标识是指批量交费记录的唯一标识'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>mgt_org_prft_center<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'管理单位利润中心'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>charg_situ_stat_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'收费情况统计标识是指收费情况统计的唯一编码'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>coll_amt_org_prft_center<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'收款单位利润中心'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>mgt_chan_org<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'渠道供电单位是指管理单位的唯一编码，此处是指交费渠道所属的管理单位编码'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>chan_cls_code<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'渠道分类编码用于记录渠道所属的机构单元，如工商银行、招商银行、电E宝、支付宝等'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>coll_branch_code<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'代收网点编码是指渠道网点的唯一编码'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>acct_date<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">datetime</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'记账日期指该笔交费记录记账的日期'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>inv_flag<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'发票开具标志是指交费台账发票开具的标志，引用国家电网公司营销管理代码类集：发票开具标志，枚举值，如未开具、已开具、已冲红、已作废'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>charg_acct_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>IDX_CHARGACCT_ACCTNO<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>acct_no<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'账户编号索引'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>IDX_CHARGACCT_CAPNO<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>cap_no<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'资金编号索引'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>IDX_CHARGACCT_CASHCHKRECID<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>cash_chk_rec_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'解款记录索引'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>IDX_CHARGACCT_CHARGDAILYSETLRECID<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>charg_daily_setl_rec_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'收费日结记录索引'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>IDX_CHARGACCT_CUSTNO<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>cust_no<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'客户编号索引'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre><span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>IDX_CHARGACCT_PAYORDERID<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>pay_order_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'支付单标识索引'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>IDX_CHARGACCT_PAYORDERNO<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>pay_order_no<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'支付单编号索引'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>IDX_CHARGACCT_PRTRNO<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>prtr_no<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'伙伴编号索引'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre><span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>IDX_CHARGACCT_SETLACCTID<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>setl_acct_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'合同账户标识索引'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre><span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>IDX_CHARGACCT_TRANSRUNACCTNO<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>trans_run_acct_no<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'交易流水号索引'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>IDX_CHARG_ACCT_CHARG_ORG<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>charg_org<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'收费单位索引'</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token punctuation\">)</span> <span class=\"token keyword\">ENGINE</span><span class=\"token operator\">=</span><span class=\"token keyword\">InnoDB</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CHARSET</span><span class=\"token operator\">=</span>utf8mb4 <span class=\"token keyword\">COMMENT</span><span class=\"token operator\">=</span><span class=\"token string\">'实体描述：交费台账是指收取客户费用、内部转帐的流水账，收费、票据退票、预收结转、退款、转预收等；实体包含的内容：交费台账标识、解款记录标识、服务种类、客户编号、收费年月、收费日期、收费类型、收费金额、收费人员、本次调尾、上次调尾、收费部门、收费单位、支付方式、交费渠道、支付单编号、资金编号、网点、交易流水号、记账编号、记账年月、收费日结记录标识、关联标识、备注、管理单位编码等；通过收费、退款等业务产生；用于记录交费流水'</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n<li>\n<p>这段 SQL 查询生成了一个包含三个部分的日报，用于统计托收业务的情况。让我们逐步解释它：</p>\n<ol>\n<li>第一个 SELECT 语句计算并展示了托收业务发送的情况：</li>\n</ol>\n<p>它选择了一条字符串 ' 托收业务共发送 '。<br />\n然后，通过 CASE 表达式计算了发送的总笔数和总金额，并根据情况添加了单位（笔或元）。<br />\n这个 SELECT 语句从表 pd_order 中检索数据，并按照指定的条件进行筛选。<br />\n筛选条件包括：<br />\nddct_strt_date &gt;= trunc (sysdate)：托收发送日期大于等于今天的日期（不包括时间部分）。<br />\nddct_strt_date &lt;= to_date (to_char (sysdate, 'yyyy-MM-dd') || ' 18:00:00', 'yyyy-MM-dd hh24:MI:ss')：托收发送日期小于等于今天的日期，并且时间部分为 18:00:00。<br />\nddct_mode = '0204'：扣款方式为 '0204'，表示<span class=\"rainbow\">托收</span>方式。<br />\n结果按照 ddct_mode 分组，因为这个查询中有一个 GROUP BY 子句。</p>\n<ol start=\"2\">\n<li>\n<p>第二个 SELECT 语句计算并展示了销账成功的情况：<br />\n它选择了一条字符串 ' 销账成功 '。<br />\n然后，通过 CASE 表达式计算了销账成功的总笔数和总金额，并根据情况添加了单位（笔或元）。<br />\n这个 SELECT 语句从表 charg_acct 中检索数据，并按照指定的条件进行筛选。<br />\n筛选条件包括：<br />\ncharg_ym = to_char (sysdate, 'yyyyMM')：收费年月等于当前年月。<br />\ncharg_date &gt;= trunc (sysdate)：收费日期大于等于今天的日期（不包括时间部分）。<br />\ncharg_date &lt;= to_date (to_char (sysdate, 'yyyy-MM-dd') || ' 18:00:00', 'yyyy-MM-dd hh24:MI:ss')：收费日期小于等于今天的日期，并且时间部分为 18:00:00。<br />\ncap_no LIKE b.chan_no || 'DZTS%'：资金编号类似于渠道编号加上 'DZTS%' 的模式。<br />\n这个查询也按照 ddct_mode 分组，与第一个 SELECT 语句相同。</p>\n</li>\n<li>\n<p>第三个 SELECT 语句计算并展示了锁定在途的情况：<br />\n它选择了一条字符串 ' 锁定在途 '。<br />\n然后，它计算了在途锁定的笔数，并将其作为一条完整的字符串返回。<br />\n这个 SELECT 语句从表 pd_order 中检索数据，并按照指定的条件进行筛选。<br />\n筛选条件与第一个 SELECT 语句中的条件类似，都是基于扣款开始日期，扣款状态和扣款方式。</p>\n</li>\n<li>\n<p>关键字 UNION ALL 用于将这三个查询的结果合并成一个结果集。 UNION ALL 会把所有符合条件的行都包括在内，不进行任何去重操作。</p>\n</li>\n</ol>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"交易对账运维数据昨天代收托收的今天对账业务\"><a class=\"anchor\" href=\"#交易对账运维数据昨天代收托收的今天对账业务\">#</a> 交易对账运维数据（昨天<span class=\"blue\">代收</span><span class=\"rainbow\">托收</span>的今天对账业务）</h3>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">WITH</span> dz_data <span class=\"token keyword\">AS</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">SELECT</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        t<span class=\"token punctuation\">.</span>dz_reco<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> t<span class=\"token punctuation\">.</span>cap_no <span class=\"token punctuation\">)</span> <span class=\"token keyword\">AS</span> dz_ywqd<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> t<span class=\"token punctuation\">.</span>dz_amt <span class=\"token punctuation\">)</span> <span class=\"token keyword\">AS</span> dz_amt </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">FROM</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">SELECT</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            a<span class=\"token punctuation\">.</span>cap_no <span class=\"token keyword\">AS</span> cap_no<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> a<span class=\"token punctuation\">.</span>charg_acct_id <span class=\"token punctuation\">)</span> <span class=\"token keyword\">AS</span> dz_count<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> a<span class=\"token punctuation\">.</span>charg_amt <span class=\"token punctuation\">)</span> <span class=\"token keyword\">AS</span> dz_amt<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token punctuation\">(</span> <span class=\"token keyword\">SELECT</span> n<span class=\"token punctuation\">.</span>chan_name <span class=\"token keyword\">FROM</span> emss_pfc<span class=\"token punctuation\">.</span>pay_chan n <span class=\"token keyword\">WHERE</span> n<span class=\"token punctuation\">.</span>chan_no <span class=\"token operator\">=</span> a<span class=\"token punctuation\">.</span>chan_no <span class=\"token punctuation\">)</span> <span class=\"token keyword\">AS</span> chan_name<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            nvl <span class=\"token punctuation\">(</span> b<span class=\"token punctuation\">.</span>reco_rslt_desc<span class=\"token punctuation\">,</span> <span class=\"token string\">'尚未对账'</span> <span class=\"token punctuation\">)</span> <span class=\"token keyword\">AS</span> dz_reco </pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">FROM</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            emss_pfc<span class=\"token punctuation\">.</span>charg_acct a</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token keyword\">LEFT</span> <span class=\"token keyword\">JOIN</span> emss_pfc<span class=\"token punctuation\">.</span>coll_trans_reco b <span class=\"token keyword\">ON</span> b<span class=\"token punctuation\">.</span>cap_no <span class=\"token operator\">=</span> a<span class=\"token punctuation\">.</span>cap_no </pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">WHERE</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            a<span class=\"token punctuation\">.</span>charg_ym <span class=\"token operator\">>=</span> to_char <span class=\"token punctuation\">(</span> sysdate <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyyMM'</span> <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>charg_date <span class=\"token operator\">>=</span> trunc <span class=\"token punctuation\">(</span> sysdate <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>charg_date <span class=\"token operator\">&lt;=</span> to_date <span class=\"token punctuation\">(</span> to_char <span class=\"token punctuation\">(</span> sysdate <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyy-MM-dd'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">'23:59:59'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyy-MM-dd hh24:MI:ss'</span> <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token operator\">AND</span> <span class=\"token punctuation\">(</span> a<span class=\"token punctuation\">.</span>cap_no <span class=\"token operator\">LIKE</span> <span class=\"token string\">'D%CZ%'</span> <span class=\"token operator\">OR</span> a<span class=\"token punctuation\">.</span>cap_no <span class=\"token operator\">LIKE</span> <span class=\"token string\">'D%DZTS%'</span> <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>cap_no <span class=\"token operator\">NOT</span> <span class=\"token operator\">LIKE</span> <span class=\"token string\">'D%'</span> <span class=\"token operator\">||</span> to_char <span class=\"token punctuation\">(</span> sysdate<span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyyMMdd'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">'%'</span> </pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            a<span class=\"token punctuation\">.</span>chan_no<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            a<span class=\"token punctuation\">.</span>cap_no<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        nvl <span class=\"token punctuation\">(</span> b<span class=\"token punctuation\">.</span>reco_rslt_desc<span class=\"token punctuation\">,</span> <span class=\"token string\">'尚未对账'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> t </pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        t<span class=\"token punctuation\">.</span>dz_reco </pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    dz_total <span class=\"token keyword\">AS</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token keyword\">SELECT</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> dz_ywqd <span class=\"token punctuation\">)</span> <span class=\"token keyword\">AS</span> total_count<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token keyword\">CASE</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>            </pre></td></tr><tr><td data-num=\"35\"></td><td><pre>            <span class=\"token keyword\">WHEN</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> dz_amt <span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">100000000</span> <span class=\"token keyword\">THEN</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>            to_char <span class=\"token punctuation\">(</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> dz_amt <span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">100000000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'FM999999990.00'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">'亿元'</span> </pre></td></tr><tr><td data-num=\"37\"></td><td><pre>            <span class=\"token keyword\">WHEN</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> dz_amt <span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">10000</span> <span class=\"token keyword\">THEN</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>            to_char <span class=\"token punctuation\">(</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> dz_amt <span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'FM999999990.00'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">'万元'</span> <span class=\"token keyword\">ELSE</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> dz_amt <span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">'元'</span> </pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token keyword\">END</span> <span class=\"token keyword\">AS</span> dz_lx_amt<span class=\"token punctuation\">,</span><span class=\"token comment\">-- 对账合计金额</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> <span class=\"token keyword\">CASE</span> <span class=\"token keyword\">WHEN</span> instr<span class=\"token punctuation\">(</span> dz_reco<span class=\"token punctuation\">,</span> <span class=\"token string\">'对账成功'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token keyword\">THEN</span> dz_ywqd <span class=\"token keyword\">ELSE</span> <span class=\"token number\">0</span> <span class=\"token keyword\">END</span> <span class=\"token punctuation\">)</span> <span class=\"token keyword\">AS</span> dz_succ_count<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> <span class=\"token keyword\">CASE</span> <span class=\"token keyword\">WHEN</span> instr<span class=\"token punctuation\">(</span> dz_reco<span class=\"token punctuation\">,</span> <span class=\"token string\">'单边账'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token keyword\">THEN</span> dz_ywqd <span class=\"token keyword\">ELSE</span> <span class=\"token number\">0</span> <span class=\"token keyword\">END</span> <span class=\"token punctuation\">)</span> <span class=\"token keyword\">AS</span> dz_dbz_count<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span> <span class=\"token keyword\">CASE</span> <span class=\"token keyword\">WHEN</span> dz_reco <span class=\"token operator\">=</span> <span class=\"token string\">'尚未对账'</span> <span class=\"token keyword\">THEN</span> dz_ywqd <span class=\"token keyword\">ELSE</span> <span class=\"token number\">0</span> <span class=\"token keyword\">END</span> <span class=\"token punctuation\">)</span> <span class=\"token keyword\">AS</span> dz_swdz_count </pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token keyword\">FROM</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        dz_data </pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token punctuation\">)</span> <span class=\"token keyword\">SELECT</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token keyword\">CASE</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token keyword\">WHEN</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>        total_count <span class=\"token operator\">=</span> dz_succ_count <span class=\"token keyword\">THEN</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>            <span class=\"token string\">'对账业务共 '</span> <span class=\"token operator\">||</span> total_count <span class=\"token operator\">||</span> <span class=\"token string\">' 个地市渠道，全部对账成功。'</span> <span class=\"token keyword\">ELSE</span> <span class=\"token string\">'对账业务共 '</span> <span class=\"token operator\">||</span> total_count <span class=\"token operator\">||</span> <span class=\"token string\">' 个地市渠道，'</span> <span class=\"token operator\">||</span> <span class=\"token string\">'今日对账成功'</span> <span class=\"token operator\">||</span> dz_succ_count <span class=\"token operator\">||</span> <span class=\"token string\">'个，单边账'</span> <span class=\"token operator\">||</span> dz_dbz_count <span class=\"token operator\">||</span> <span class=\"token string\">'个，尚未对账'</span> <span class=\"token operator\">||</span> dz_swdz_count <span class=\"token operator\">||</span> <span class=\"token string\">'个，对账异常'</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span> total_count <span class=\"token operator\">-</span> dz_succ_count <span class=\"token operator\">-</span> dz_dbz_count <span class=\"token operator\">-</span> dz_swdz_count <span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">'个。'</span> </pre></td></tr><tr><td data-num=\"51\"></td><td><pre>            <span class=\"token keyword\">END</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"交易对账运维数据\"</span> </pre></td></tr><tr><td data-num=\"52\"></td><td><pre><span class=\"token keyword\">FROM</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    dz_total<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"昨天今天托收锁定在途监控\"><a class=\"anchor\" href=\"#昨天今天托收锁定在途监控\">#</a> 昨天今天<span class=\"rainbow\">托收</span>锁定在途监控</h3>\n<ul>\n<li>\n<p>提供的原始 sql 语句</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">select</span> decode<span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">.</span>affil_plat<span class=\"token punctuation\">,</span> <span class=\"token string\">'01'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'全渠道平台'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'业务连接平台'</span><span class=\"token punctuation\">)</span> 所属平台<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    decode<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>ddct_mode<span class=\"token punctuation\">,</span> <span class=\"token string\">'03'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'代扣锁定'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'托收锁定'</span><span class=\"token punctuation\">)</span>     收费类型<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token punctuation\">(</span><span class=\"token keyword\">select</span> n<span class=\"token punctuation\">.</span>chan_name <span class=\"token operator\">||</span> a<span class=\"token punctuation\">.</span>chan_no</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">from</span> emss_pfc<span class=\"token punctuation\">.</span>pay_chan n</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">where</span> n<span class=\"token punctuation\">.</span>chan_no <span class=\"token operator\">=</span> a<span class=\"token punctuation\">.</span>chan_no<span class=\"token punctuation\">)</span>                 渠道编码<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span>ddct_t_num<span class=\"token punctuation\">)</span>                               总笔数<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span>ddct_t_amt<span class=\"token punctuation\">)</span>                               总金额<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    to_char<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>ddct_strt_date<span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyy-MM-dd'</span><span class=\"token punctuation\">)</span>       托收发送日期</pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">from</span> emss_pfc<span class=\"token punctuation\">.</span>pd_order a</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">inner</span> <span class=\"token keyword\">join</span> emss_pfc<span class=\"token punctuation\">.</span>pay_chan b <span class=\"token keyword\">on</span> b<span class=\"token punctuation\">.</span>chan_no <span class=\"token operator\">=</span> a<span class=\"token punctuation\">.</span>chan_no</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">where</span> a<span class=\"token punctuation\">.</span>ddct_stat <span class=\"token operator\">=</span> <span class=\"token string\">'01'</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token operator\">and</span> a<span class=\"token punctuation\">.</span>ddct_mode <span class=\"token operator\">=</span> <span class=\"token string\">'0204'</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token operator\">and</span> a<span class=\"token punctuation\">.</span>ddct_strt_date <span class=\"token operator\">>=</span> trunc<span class=\"token punctuation\">(</span>sysdate <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">group</span> <span class=\"token keyword\">by</span> b<span class=\"token punctuation\">.</span>affil_plat<span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">.</span>ddct_mode<span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">.</span>chan_no<span class=\"token punctuation\">,</span> to_char<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>ddct_strt_date<span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyy-MM-dd'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">order</span> <span class=\"token keyword\">by</span> to_char<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>ddct_strt_date<span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyy-MM-dd'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">.</span>affil_plat<span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">.</span>chan_no<span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n<li>\n<p>分析结果</p>\n<ul>\n<li>\n<p>涉及表名：</p>\n<ol>\n<li>emss_pfc.pd_order：批扣订单表，包含了代扣业务的订单信息。<span class=\"label\">oracle DB3</span></li>\n</ol>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>pd_order<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>pd_order_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'委托扣款单标识是指委托扣款单的唯一标识'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>ddct_exp_categ<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'扣款费用类别是指委托扣款的费用类别，引用国家电网公司营销管理代码类集：扣款费用类别，枚举值，如后付费、分次划拨、费控等'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>ddct_mode<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'扣款方式是指委托扣款的方式，引用国家电网公司营销管理代码类集：扣款方式，枚举值，如普通托收、电子托收、代扣'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>chan_no<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'渠道编号是指渠道对象的唯一编码，此处指委托扣款单关联的渠道'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>ddct_t_num<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'扣款总笔数是指委托扣款的总笔数'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>ddct_t_amt<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">decimal</span><span class=\"token punctuation\">(</span><span class=\"token number\">18</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'扣款总额是指委托扣款的总金额'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>ddct_stat<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'扣款状态是指委托扣款的扣款状态，引用国家电网公司营销管理代码类集：扣款状态，枚举值，如在途、成功、失败'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>actl_ddct_t_num<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'实际扣款户数是指实际扣款的总户数'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>actl_ddct_t_amt<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">decimal</span><span class=\"token punctuation\">(</span><span class=\"token number\">18</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'实际扣款总额是指实际扣款的总金额'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>ddct_init<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'扣款发起人是指委托扣款的发起人员'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>ddct_strt_date<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">datetime</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'扣款发起日期是指委托扣款的发起日期'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>ddct_acmp_date<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">datetime</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'扣款完成日期是指委托扣款的完成日期'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>ddct_batch_no<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">48</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'扣款批次号是指委托扣款的批次号'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>mgt_org_code<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'管理单位编码是指管理单位的唯一编码，此处是指委托扣款单的管理单位编码'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>chan_cls<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'渠道分类是指委托扣款的渠道分类，如工商银行、农业银行等'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>cap_no<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'资金编号是指解款记录的唯一编码'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>agrt_no<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'协议编号是指委托扣款协议的编号'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>bank_acct<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'银行账号是指客户开设的银行账号'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>fail_reason<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'失败原因指委托扣款的失败原因'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>file_name<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">512</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'文件名是指代扣出盘文件的名称'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>file_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'文档服务器文件唯一标识'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>ntce_no<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'记录通知的进账单编号信息，用于资金勾对'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>pay_main_type<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'支付账户的支付主体类型，如：财政客户、普通客户。'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>pd_order_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>IDX_PDORDER_CPNO<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>cap_no<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>IDX_PDORDER_DDCTBATCHNO<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>ddct_batch_no<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>IDX_PD_ORDER_DDCT_STRT_DATE<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>ddct_strt_date<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>IDX_PD_ORDER_MGT_ORG_CODE<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>mgt_org_code<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token punctuation\">)</span> <span class=\"token keyword\">ENGINE</span><span class=\"token operator\">=</span><span class=\"token keyword\">InnoDB</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CHARSET</span><span class=\"token operator\">=</span>utf8mb4 <span class=\"token keyword\">COMMENT</span><span class=\"token operator\">=</span><span class=\"token string\">'委托扣款单是指企业依据委托扣款协议，根据扣款策略，将委托扣款数据发送至委托扣款单位，由委托扣款单位从用户账户中扣划资金并通知企业完成销账的申请单；委托扣款单实体包含扣款费用类别、扣款方式、扣款总笔数、扣款总额、扣款状态、实际扣款笔数、实际扣款总额等属性；由委托扣款出盘业务产生；主要用于记录委托扣款的情况'</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><ol start=\"2\">\n<li>emss_pfc.pay_chan：收费渠道表，包含了支付渠道的相关信息。<span class=\"label\">oracle DB3</span></li>\n</ol>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>pay_chan<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>pay_chan_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'交费渠道标识'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>chan_no<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'渠道编码，唯一'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>chan_name<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'渠道名称'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>chan_abbr<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'渠道简称'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>charg_stf<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'收费人员'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>pay_bank_acct<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'付款方银行账户'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>pay_bank_acct_no<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'付款方银行账号'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>chan_contact<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'渠道联系人'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>contact_tel<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'联系人电话'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>enc_mode<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'加密方式'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>enc_key<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'密钥'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>trnsm_agrt<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'传输协议'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>reco_cyc<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'对账周期'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>reco_time_sec<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'对账时间段'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>master_ip<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'主IP'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>slave_ip<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'从IP'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>prft_center<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'利润中心'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>cash_chk_bank_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'解款银行标识'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>coll_amt_org<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'收款单位'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>refund_sprt_flag<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'退费支持标志'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>send_sign_flag<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'发送签约标志'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>wk_beg_time<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'渠道工作日开始时间'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>wk_end_time<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'渠道工作日结束时间'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>hldy_flag<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'执行节假日标志 01是 02否'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>auto_hndl_flag<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'单边账自动处理标志，02:是,01:否'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>chan_cls_code<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'渠道分类编码，如银行名称等'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>affil_plat<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'所属平台标志：00直收平台，01全渠道平台'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>bus_type<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'业务类型'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>auto_coll_flag<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'自动托收标志：是否开启自动托收业务'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>auto_bd_flag<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'自动批扣标志：是否开启自动批扣业务'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>pay_chan_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>IDX_PAY_CHAN_CNO<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>chan_no<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token punctuation\">)</span> <span class=\"token keyword\">ENGINE</span><span class=\"token operator\">=</span><span class=\"token keyword\">InnoDB</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CHARSET</span><span class=\"token operator\">=</span>utf8mb4 <span class=\"token keyword\">COMMENT</span><span class=\"token operator\">=</span><span class=\"token string\">'交费渠道信息表，包含各个交费渠道的具体信息'</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n<li>\n<p>SELECT 语句：</p>\n<ol>\n<li>使用 decode () 函数对 b.affil_plat 进行条件判断，如果其值为 '01'，则显示为 ' 全渠道平台 '，否则显示为 ' 业务连接平台 '。</li>\n<li>使用 decode () 函数对 a.ddct_mode 进行条件判断，如果其值为 '03'，则显示为 ' 代扣锁定 '，否则显示为 ' 托收锁定 '。</li>\n<li>使用子查询从 pay_chan 表中获取 chan_name 字段，并将其与 pd_order 表中的 chan_no 字段进行连接，作为 渠道编码 列的值。</li>\n<li>使用 sum () 函数对 ddct_t_num 和 ddct_t_amt 字段进行汇总，得到总笔数和总金额。</li>\n<li>使用 to_char () 函数将 ddct_strt_date 字段格式化为 'yyyy-MM-dd' 格式，作为 托收发送日期 列的值。</li>\n</ol>\n</li>\n<li>\n<p>FROM 语句：</p>\n<ol>\n<li>从 emss_pfc.pd_order 表和 emss_pfc.pay_chan 表中获取数据。</li>\n<li>使用 INNER JOIN 将两个表连接起来，连接条件是 pay_chan 表中的 chan_no 字段与 pd_order 表中的 chan_no 字段相匹配。</li>\n</ol>\n</li>\n<li>\n<p>WHERE 语句：<br />\n设定条件筛选规则：</p>\n<ol>\n<li>ddct_stat = '01'：扣款状态为 '01'，即在途状态。</li>\n<li>ddct_mode = '0204'：扣款方式为 '0204'。</li>\n<li>ddct_strt_date &gt;= trunc (sysdate - 1)：扣款发起日期大于等于前一天的日期。</li>\n</ol>\n</li>\n<li>\n<p>GROUP BY 语句：</p>\n<ol>\n<li>对 b.affil_plat、a.ddct_mode、a.chan_no 和 to_char (a.ddct_strt_date, 'yyyy-MM-dd') 进行分组，以进行汇总统计。</li>\n</ol>\n</li>\n<li>\n<p>ORDER BY 语句：</p>\n<ul>\n<li>按照 托收发送日期、所属平台 和 渠道编号 进行排序，以便结果更易读。</li>\n<li>这段 SQL 查询语句的目的是获取前一天扣款方式为 '0204'（即某种特定方式）且扣款状态为在途的数据，并按照所属平台、收费类型、渠道编码和托收发送日期进行汇总和排序。</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"渠道总体耗时\"><a class=\"anchor\" href=\"#渠道总体耗时\">#</a> 渠道总体耗时</h3>\n<ul>\n<li>预览图\n<ul>\n<li><img data-src=\"/img/%E8%83%BD%E6%BA%90%E4%BA%92%E8%81%94%E7%BD%91/%E6%89%98%E6%94%B6%E5%85%A8%E6%99%AF%E7%9B%91%E6%8E%A7%E6%B8%A0%E9%81%93%E6%80%BB%E4%BD%93%E8%80%97%E6%97%B6.png\" alt=\"托收全景监控渠道总体耗时\" /></li>\n</ul>\n</li>\n<li>提供渠道总体耗时 SQL 语句\n<ul>\n<li>WITH 子句（公共表表达式）</li>\n</ul>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">-- 渠道总体耗时</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">WITH</span> TMP <span class=\"token keyword\">AS</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">SELECT</span> </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token punctuation\">(</span><span class=\"token keyword\">SELECT</span> C<span class=\"token punctuation\">.</span>CHAN_NAME <span class=\"token keyword\">FROM</span> PAY_CHAN C <span class=\"token keyword\">WHERE</span> C<span class=\"token punctuation\">.</span>CHAN_NO <span class=\"token operator\">=</span> O<span class=\"token punctuation\">.</span>CHAN_NO<span class=\"token punctuation\">)</span> 渠道名称<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token punctuation\">(</span><span class=\"token keyword\">SELECT</span> SUBSTR<span class=\"token punctuation\">(</span>C<span class=\"token punctuation\">.</span>CHAN_NAME<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> INSTR<span class=\"token punctuation\">(</span>C<span class=\"token punctuation\">.</span>CHAN_NAME<span class=\"token punctuation\">,</span> <span class=\"token string\">'（'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">FROM</span> PAY_CHAN C <span class=\"token keyword\">WHERE</span> C<span class=\"token punctuation\">.</span>CHAN_NO <span class=\"token operator\">=</span> O<span class=\"token punctuation\">.</span>CHAN_NO<span class=\"token punctuation\">)</span> 省渠道名称<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        CHAN_NO<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        O<span class=\"token punctuation\">.</span>PD_ORDER_ID<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        O<span class=\"token punctuation\">.</span>ACTL_DDCT_T_AMT<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token punctuation\">(</span><span class=\"token keyword\">CASE</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token keyword\">WHEN</span> O<span class=\"token punctuation\">.</span>DDCT_STAT <span class=\"token operator\">=</span> <span class=\"token string\">'01'</span> <span class=\"token keyword\">THEN</span> <span class=\"token punctuation\">(</span>SYSDATE <span class=\"token operator\">-</span> O<span class=\"token punctuation\">.</span>DDCT_STRT_DATE<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">24</span> <span class=\"token operator\">*</span> <span class=\"token number\">60</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token keyword\">ELSE</span> <span class=\"token punctuation\">(</span>O<span class=\"token punctuation\">.</span>DDCT_ACMP_DATE <span class=\"token operator\">-</span> O<span class=\"token punctuation\">.</span>DDCT_STRT_DATE<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">24</span> <span class=\"token operator\">*</span> <span class=\"token number\">60</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">END</span><span class=\"token punctuation\">)</span> DBHS</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">FROM</span> </pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        PD_ORDER O</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">WHERE</span> </pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        O<span class=\"token punctuation\">.</span>DDCT_MODE <span class=\"token operator\">=</span> <span class=\"token string\">'0204'</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token operator\">AND</span> DDCT_STRT_DATE <span class=\"token operator\">>=</span> TRUNC<span class=\"token punctuation\">(</span>SYSDATE<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token operator\">AND</span> DDCT_STRT_DATE <span class=\"token operator\">&lt;</span> TRUNC<span class=\"token punctuation\">(</span>SYSDATE <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token operator\">AND</span> DDCT_EXP_CATEG <span class=\"token operator\">=</span> <span class=\"token string\">'02'</span> <span class=\"token comment\">-- 01 后付费 02 分次划拨</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token operator\">AND</span> O<span class=\"token punctuation\">.</span>DDCT_STAT <span class=\"token operator\">&lt;></span> <span class=\"token string\">'00'</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">SELECT</span> </pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    省渠道名称<span class=\"token punctuation\">,</span> <span class=\"token function\">ROUND</span><span class=\"token punctuation\">(</span><span class=\"token function\">AVG</span><span class=\"token punctuation\">(</span>DBHS<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> 渠道总体耗时</pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">FROM</span> </pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    TMP</pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span> </pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    省渠道名称</pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">ORDER</span> <span class=\"token keyword\">BY</span> </pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token function\">AVG</span><span class=\"token punctuation\">(</span>DBHS<span class=\"token punctuation\">)</span> <span class=\"token keyword\">DESC</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><ul>\n<li>分析结果\n<ol>\n<li>\n<p>这部分是一个公共表表达式（WITH 子句），命名为 TMP。它从 PD_ORDER 表中选择数据，并进行筛选和计算。</p>\n<ul>\n<li>渠道名称列通过子查询从 PAY_CHAN 表中获取，根据订单的 CHAN_NO 字段匹配。(通过渠道编号匹配)</li>\n<li>省渠道名称列也通过子查询从 PAY_CHAN 表中获取，但使用了 SUBSTR 和 INSTR 函数来截取括号前的内容。示例：(渠道名称（省份）-&gt; 渠道名称)</li>\n<li>CHAN_NO、PD_ORDER_ID、ACTL_DDCT_T_AMT 列直接从 PD_ORDER 表中选择。</li>\n<li>DBHS 列使用 CASE 表达式根据订单的 DDCT_STAT 字段计算订单的耗时。\n<ul>\n<li>当 DDCT_STAT = '01'，计算从<span class=\"blue\">订单发起</span>到<span class=\"red\">当前时间</span>的时间间隔（单位是天），然后乘以 24 * 60 将时间间隔转换为分钟。</li>\n<li>否则计算从<span class=\"blue\">订单开始</span>到<span class=\"red\">完成的时间</span>间隔（单位是天），然后乘以 24 * 60 将时间间隔转换为分钟。</li>\n</ul>\n</li>\n<li><span class=\"rainbow\">扣款方式是指委托扣款的方式</span> DDCT_MODE 等于 '0204'</li>\n<li><span class=\"rainbow\">扣款发起日期</span> DDCT_STRT_DATE 大于等于当天的零点</li>\n<li><span class=\"rainbow\">扣款完成日期</span> DDCT_STRT_DATE 小于明天的零点</li>\n<li><span class=\"rainbow\">扣款费用类别是指委托扣款的费用类别</span> DDCT_EXP_CATEG 等于 '02'（分次划拨）</li>\n<li><span class=\"rainbow\">扣款状态是指委托扣款的扣款状态</span> DDCT_STAT 不等于 '00'（表示扣款状态不为 '00'）</li>\n</ul>\n</li>\n</ol>\n</li>\n<li>主查询<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">SELECT</span> </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    省渠道名称<span class=\"token punctuation\">,</span> <span class=\"token function\">ROUND</span><span class=\"token punctuation\">(</span><span class=\"token function\">AVG</span><span class=\"token punctuation\">(</span>DBHS<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> 渠道总体耗时</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">FROM</span> </pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    TMP</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span> </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    省渠道名称</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">ORDER</span> <span class=\"token keyword\">BY</span> </pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token function\">AVG</span><span class=\"token punctuation\">(</span>DBHS<span class=\"token punctuation\">)</span> <span class=\"token keyword\">DESC</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><ul>\n<li>这部分是主查询，从上面的公共表 TMP 中选择数据。</li>\n<li>使用 ROUND 函数对平均耗时进行四舍五入，保留两位小数。</li>\n<li>使用 GROUP BY 子句对省渠道名称进行分组。</li>\n<li>最后使用 ORDER BY 子句对平均耗时进行降序排列。</li>\n<li>总体而言，该 SQL 语句的目的是从 PD_ORDER 表中选择符合特定条件的数据，并与 PAY_CHAN 表进行关联，然后计算每个省份的渠道的平均耗时。</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n",
            "tags": [
                "项目开发"
            ]
        },
        {
            "id": "https://hk2012.github.io/2024/04/01/java/%E5%8D%97%E4%BA%AC%E4%BA%BF%E6%95%B0%E9%A1%B9%E7%9B%AE/",
            "url": "https://hk2012.github.io/2024/04/01/java/%E5%8D%97%E4%BA%AC%E4%BA%BF%E6%95%B0%E9%A1%B9%E7%9B%AE/",
            "title": "能源互联网营销设计方案及建设",
            "date_published": "2024-04-01T01:10:00.000Z",
            "content_html": "<h1 id=\"研发人员能源互联网关注点\"><a class=\"anchor\" href=\"#研发人员能源互联网关注点\">#</a> 研发人员能源互联网关注点</h1>\n<h2 id=\"技术架构和系统设计\"><a class=\"anchor\" href=\"#技术架构和系统设计\">#</a> 技术架构和系统设计：</h2>\n<ol>\n<li>开发人员需要理解和评估能源互联网营销系统的技术架构，包括后端服务器、数据库、前端界面等方面的设计。他们需要确保系统具有良好的可扩展性、性能和安全性。</li>\n<li>总体架构图\n<ul>\n<li><img data-src=\"/img/%E8%83%BD%E6%BA%90%E4%BA%92%E8%81%94%E7%BD%91/%E8%90%A5%E9%94%802.0%E6%80%BB%E4%BD%93%E6%9E%B6%E6%9E%84%E5%9B%BE.png\" alt=\"总体架构图\" /></li>\n</ul>\n</li>\n<li>技术架构图第一版\n<ul>\n<li><img data-src=\"/img/%E8%83%BD%E6%BA%90%E4%BA%92%E8%81%94%E7%BD%91/%E8%90%A5%E9%94%802.0%E6%8A%80%E6%9C%AF%E6%9E%B6%E6%9E%84%E5%9B%BE.png\" alt=\"技术架构图\" /></li>\n</ul>\n</li>\n<li>技术架构图第二版\n<ul>\n<li><img data-src=\"/img/%E8%83%BD%E6%BA%90%E4%BA%92%E8%81%94%E7%BD%91/%E8%90%A5%E9%94%802.0%E6%8A%80%E6%9C%AF%E6%9E%B6%E6%9E%84%E5%9B%BE_2.png\" alt=\"技术架构图\" /></li>\n</ul>\n</li>\n<li>延展设计图\n<ul>\n<li><img data-src=\"/img/%E8%83%BD%E6%BA%90%E4%BA%92%E8%81%94%E7%BD%91/%E8%90%A5%E9%94%802.0%E5%86%85%E9%83%A8%E9%9B%86%E6%88%90%E5%B1%82%E9%9D%A2%E7%9A%84%E5%BB%B6%E5%B1%95%E8%AE%BE%E8%AE%A1%E5%9B%BE.png\" alt=\"技术架构图\" /></li>\n</ul>\n</li>\n</ol>\n<h2 id=\"数据管理和分析\"><a class=\"anchor\" href=\"#数据管理和分析\">#</a> 数据管理和分析：</h2>\n<ol>\n<li>能源互联网营销系统涉及大量数据的收集、存储和分析，开发人员需要关注数据管理的方案，包括数据的采集、清洗、存储和处理，以及数据分析和挖掘技术的应用。</li>\n</ol>\n<h2 id=\"用户体验和界面设计\"><a class=\"anchor\" href=\"#用户体验和界面设计\">#</a> 用户体验和界面设计：</h2>\n<ol>\n<li>用户体验对于能源互联网营销系统至关重要。开发人员需要与设计团队合作，确保系统界面友好、易用，并能够满足用户的需求和期望。</li>\n</ol>\n<h2 id=\"安全性和隐私保护\"><a class=\"anchor\" href=\"#安全性和隐私保护\">#</a> 安全性和隐私保护：</h2>\n<ol>\n<li>能源互联网营销涉及用户的个人和敏感信息，因此安全性和隐私保护是至关重要的。开发人员需要关注系统的安全设计，包括身份验证、数据加密、访问控制等方面的实施。</li>\n</ol>\n<h2 id=\"云计算和物联网技术\"><a class=\"anchor\" href=\"#云计算和物联网技术\">#</a> 云计算和物联网技术：</h2>\n<ol>\n<li>能源互联网营销系统通常需要借助云计算和物联网技术实现设备之间的连接和数据交换。开发人员需要了解并熟练应用这些技术，确保系统的稳定性和可靠性。</li>\n</ol>\n<h2 id=\"集成和扩展性\"><a class=\"anchor\" href=\"#集成和扩展性\">#</a> 集成和扩展性：</h2>\n<ol>\n<li>能源互联网营销系统通常需要与其他系统集成，例如能源管理系统、智能电表系统等。开发人员需要考虑系统的集成方案，并确保系统具有良好的扩展性，能够满足未来业务发展的需求。</li>\n</ol>\n<h2 id=\"持续优化和迭代\"><a class=\"anchor\" href=\"#持续优化和迭代\">#</a> 持续优化和迭代：</h2>\n<ol>\n<li>能源互联网营销系统是一个持续发展的过程，开发人员需要通过持续优化和迭代来不断改进系统，以满足用户和业务的不断变化的需求。</li>\n</ol>\n<h1 id=\"数据库信息汇总\"><a class=\"anchor\" href=\"#数据库信息汇总\">#</a> 数据库信息汇总</h1>\n<ol>\n<li>Oracle DB1\n<ul>\n<li>\n<p>emss_pserv</p>\n<ol>\n<li>ocs_business_scenario: 全渠道场景表</li>\n<li>ocs_channel_archive: 渠道档案表</li>\n<li>ocs_channel_inter_rela: 渠道业务授权表</li>\n<li>ocs_interface_def: 接口定义表</li>\n<li>ocs_relat_map: 全渠道关系映射表</li>\n<li>ocs_system_config: 系统参数配置</li>\n</ol>\n</li>\n<li>\n<p>emss_cmc</p>\n<ol>\n<li>mgt_org: 管理单位表</li>\n</ol>\n</li>\n</ul>\n</li>\n<li>Oracle DB3\n<ul>\n<li>emss_pfc\n<ol>\n<li>pay_chan: 收费渠道表</li>\n<li>coll_trans_rec: 代收记录表</li>\n<li>coll_trans_reco: 对账汇总表 (代收 + 托收)</li>\n<li>pd_order: 批扣订单表</li>\n<li>pd_acct: 批扣明细表</li>\n<li>charg_acct: 收费记录表</li>\n<li>pay_order: 支付订单表</li>\n<li>cash_chk_rec: 解款到账表</li>\n<li>chan_auto_task_cfg: 代扣上限表</li>\n</ol>\n</li>\n</ul>\n</li>\n<li>Oracle DB4\n<ul>\n<li>emss_woc\n<ol>\n<li>hldy_info: 假日信息表</li>\n</ol>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">-- EMSS_WOC.HLDY_INFO definition</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token string\">\"EMSS_WOC\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"HLDY_INFO\"</span> </pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">(</span>\t<span class=\"token string\">\"HLDY_INFO_ID\"</span> NUMBER<span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">ENABLE</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token string\">\"HLDY_NAME\"</span> VARCHAR2<span class=\"token punctuation\">(</span><span class=\"token number\">256</span> <span class=\"token keyword\">CHAR</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">COLLATE</span> <span class=\"token string\">\"USING_NLS_COMP\"</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token string\">\"HLDY_TYPE\"</span> VARCHAR2<span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">COLLATE</span> <span class=\"token string\">\"USING_NLS_COMP\"</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token string\">\"BEG_DATE\"</span> <span class=\"token keyword\">DATE</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token string\">\"END_DATE\"</span> <span class=\"token keyword\">DATE</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token string\">\"INTERVAL_DATE_NUM\"</span> NUMBER<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token string\">\"CREATOR\"</span> VARCHAR2<span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">COLLATE</span> <span class=\"token string\">\"USING_NLS_COMP\"</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token string\">\"CREAT_DATE\"</span> <span class=\"token keyword\">DATE</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">CONSTRAINT</span> <span class=\"token string\">\"PK_HLDYINFO\"</span> <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"HLDY_INFO_ID\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">USING</span> <span class=\"token keyword\">INDEX</span> PCTFREE <span class=\"token number\">10</span> INITRANS <span class=\"token number\">2</span> MAXTRANS <span class=\"token number\">255</span> <span class=\"token keyword\">COMPUTE</span> <span class=\"token keyword\">STATISTICS</span> NOLOGGING </pre></td></tr><tr><td data-num=\"14\"></td><td><pre>STORAGE<span class=\"token punctuation\">(</span>INITIAL <span class=\"token number\">65536</span> <span class=\"token keyword\">NEXT</span> <span class=\"token number\">1048576</span> MINEXTENTS <span class=\"token number\">1</span> MAXEXTENTS <span class=\"token number\">2147483645</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>PCTINCREASE <span class=\"token number\">0</span> FREELISTS <span class=\"token number\">1</span> FREELIST GROUPS <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>BUFFER_POOL <span class=\"token keyword\">DEFAULT</span> FLASH_CACHE <span class=\"token keyword\">DEFAULT</span> CELL_FLASH_CACHE <span class=\"token keyword\">DEFAULT</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">TABLESPACE</span> <span class=\"token string\">\"TBS_EMSS_WOC\"</span>  <span class=\"token keyword\">ENABLE</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">)</span>  <span class=\"token keyword\">DEFAULT</span> COLLATION <span class=\"token string\">\"USING_NLS_COMP\"</span> SEGMENT CREATION IMMEDIATE </pre></td></tr><tr><td data-num=\"19\"></td><td><pre>PCTFREE <span class=\"token number\">10</span> PCTUSED <span class=\"token number\">40</span> INITRANS <span class=\"token number\">1</span> MAXTRANS <span class=\"token number\">255</span> </pre></td></tr><tr><td data-num=\"20\"></td><td><pre>NOCOMPRESS NOLOGGING</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>STORAGE<span class=\"token punctuation\">(</span>INITIAL <span class=\"token number\">65536</span> <span class=\"token keyword\">NEXT</span> <span class=\"token number\">1048576</span> MINEXTENTS <span class=\"token number\">1</span> MAXEXTENTS <span class=\"token number\">2147483645</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>PCTINCREASE <span class=\"token number\">0</span> FREELISTS <span class=\"token number\">1</span> FREELIST GROUPS <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>BUFFER_POOL <span class=\"token keyword\">DEFAULT</span> FLASH_CACHE <span class=\"token keyword\">DEFAULT</span> CELL_FLASH_CACHE <span class=\"token keyword\">DEFAULT</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">TABLESPACE</span> <span class=\"token string\">\"TBS_EMSS_WOC\"</span> <span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">UNIQUE</span> <span class=\"token keyword\">INDEX</span> <span class=\"token string\">\"EMSS_WOC\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"PK_HLDYINFO\"</span> <span class=\"token keyword\">ON</span> <span class=\"token string\">\"EMSS_WOC\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"HLDY_INFO\"</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"HLDY_INFO_ID\"</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"27\"></td><td><pre>PCTFREE <span class=\"token number\">10</span> INITRANS <span class=\"token number\">2</span> MAXTRANS <span class=\"token number\">255</span> <span class=\"token keyword\">COMPUTE</span> <span class=\"token keyword\">STATISTICS</span> NOLOGGING </pre></td></tr><tr><td data-num=\"28\"></td><td><pre>STORAGE<span class=\"token punctuation\">(</span>INITIAL <span class=\"token number\">65536</span> <span class=\"token keyword\">NEXT</span> <span class=\"token number\">1048576</span> MINEXTENTS <span class=\"token number\">1</span> MAXEXTENTS <span class=\"token number\">2147483645</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>PCTINCREASE <span class=\"token number\">0</span> FREELISTS <span class=\"token number\">1</span> FREELIST GROUPS <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>BUFFER_POOL <span class=\"token keyword\">DEFAULT</span> FLASH_CACHE <span class=\"token keyword\">DEFAULT</span> CELL_FLASH_CACHE <span class=\"token keyword\">DEFAULT</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">TABLESPACE</span> <span class=\"token string\">\"TBS_EMSS_WOC\"</span> <span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token keyword\">GRANT</span> <span class=\"token keyword\">DELETE</span> <span class=\"token keyword\">ON</span> <span class=\"token string\">\"EMSS_WOC\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"HLDY_INFO\"</span> <span class=\"token keyword\">TO</span> <span class=\"token string\">\"DEV_EMSS_WOC\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token keyword\">GRANT</span> <span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">ON</span> <span class=\"token string\">\"EMSS_WOC\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"HLDY_INFO\"</span> <span class=\"token keyword\">TO</span> <span class=\"token string\">\"DEV_EMSS_WOC\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token keyword\">GRANT</span> <span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">ON</span> <span class=\"token string\">\"EMSS_WOC\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"HLDY_INFO\"</span> <span class=\"token keyword\">TO</span> <span class=\"token string\">\"DEV_EMSS_WOC\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token keyword\">GRANT</span> <span class=\"token keyword\">UPDATE</span> <span class=\"token keyword\">ON</span> <span class=\"token string\">\"EMSS_WOC\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"HLDY_INFO\"</span> <span class=\"token keyword\">TO</span> <span class=\"token string\">\"DEV_EMSS_WOC\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token keyword\">GRANT</span> <span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">ON</span> <span class=\"token string\">\"EMSS_WOC\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"HLDY_INFO\"</span> <span class=\"token keyword\">TO</span> <span class=\"token string\">\"DEV_EMSS_BAC\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token keyword\">GRANT</span> <span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">ON</span> <span class=\"token string\">\"EMSS_WOC\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"HLDY_INFO\"</span> <span class=\"token keyword\">TO</span> <span class=\"token string\">\"EMSS_BAC\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token keyword\">COMMENT</span> <span class=\"token keyword\">ON</span> <span class=\"token keyword\">TABLE</span> EMSS_WOC<span class=\"token punctuation\">.</span>HLDY_INFO <span class=\"token operator\">IS</span> <span class=\"token string\">'假日信息表'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token keyword\">COMMENT</span> <span class=\"token keyword\">ON</span> <span class=\"token keyword\">COLUMN</span> EMSS_WOC<span class=\"token punctuation\">.</span>HLDY_INFO<span class=\"token punctuation\">.</span>HLDY_INFO_ID <span class=\"token operator\">IS</span> <span class=\"token string\">'属性描述：本实体记录的唯一标识'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token keyword\">COMMENT</span> <span class=\"token keyword\">ON</span> <span class=\"token keyword\">COLUMN</span> EMSS_WOC<span class=\"token punctuation\">.</span>HLDY_INFO<span class=\"token punctuation\">.</span>HLDY_NAME <span class=\"token operator\">IS</span> <span class=\"token string\">'属性描述：假日名称'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token keyword\">COMMENT</span> <span class=\"token keyword\">ON</span> <span class=\"token keyword\">COLUMN</span> EMSS_WOC<span class=\"token punctuation\">.</span>HLDY_INFO<span class=\"token punctuation\">.</span>HLDY_TYPE <span class=\"token operator\">IS</span> <span class=\"token string\">'属性描述：假日类型：01法定节假日 02补班日 03调休日01和03都是休息日，01代表法定3倍工资 02代表法定2部工资'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token keyword\">COMMENT</span> <span class=\"token keyword\">ON</span> <span class=\"token keyword\">COLUMN</span> EMSS_WOC<span class=\"token punctuation\">.</span>HLDY_INFO<span class=\"token punctuation\">.</span>BEG_DATE <span class=\"token operator\">IS</span> <span class=\"token string\">'属性描述：开始日期'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token keyword\">COMMENT</span> <span class=\"token keyword\">ON</span> <span class=\"token keyword\">COLUMN</span> EMSS_WOC<span class=\"token punctuation\">.</span>HLDY_INFO<span class=\"token punctuation\">.</span>END_DATE <span class=\"token operator\">IS</span> <span class=\"token string\">'属性描述：结束日期'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token keyword\">COMMENT</span> <span class=\"token keyword\">ON</span> <span class=\"token keyword\">COLUMN</span> EMSS_WOC<span class=\"token punctuation\">.</span>HLDY_INFO<span class=\"token punctuation\">.</span>INTERVAL_DATE_NUM <span class=\"token operator\">IS</span> <span class=\"token string\">'属性描述：间隔天数'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token keyword\">COMMENT</span> <span class=\"token keyword\">ON</span> <span class=\"token keyword\">COLUMN</span> EMSS_WOC<span class=\"token punctuation\">.</span>HLDY_INFO<span class=\"token punctuation\">.</span>CREATOR <span class=\"token operator\">IS</span> <span class=\"token string\">'属性描述：创建人'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre><span class=\"token keyword\">COMMENT</span> <span class=\"token keyword\">ON</span> <span class=\"token keyword\">COLUMN</span> EMSS_WOC<span class=\"token punctuation\">.</span>HLDY_INFO<span class=\"token punctuation\">.</span>CREAT_DATE <span class=\"token operator\">IS</span> <span class=\"token string\">'属性描述：创建日期'</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>MySQL\n<ul>\n<li>\n<p>quanqudao_data</p>\n<ul>\n<li>fact: 事实表\n<ol>\n<li>fact_debit: 代扣汇总表</li>\n<li>fact_debit_error: 代扣失败汇总表</li>\n<li>fact_deplicate_charge: 疑似重复缴费表</li>\n<li>fact_debit_wk: 代扣工单关联表</li>\n</ol>\n</li>\n</ul>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>fact_debit_wk<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">AUTO_INCREMENT</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'主键'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>sta_date<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">date</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'年月日'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>mgt_org_code<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'管理单位编码'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>channel_code<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'渠道编码'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>busi_type<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'业务类型'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>mq_msg<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">text</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'工单消息'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>handle_time<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">datetime</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'工单时间'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>accept_content<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">text</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'工单内容'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token identifier\"><span class=\"token punctuation\">`</span>create_time<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">datetime</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'创建时间'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">,</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>sta_date<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>indx_mgt<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>mgt_org_code<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>indx_sta_date<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>sta_date<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">USING</span> <span class=\"token keyword\">BTREE</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>indx_channel<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>channel_code<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">)</span> <span class=\"token keyword\">ENGINE</span><span class=\"token operator\">=</span><span class=\"token keyword\">InnoDB</span> <span class=\"token keyword\">AUTO_INCREMENT</span><span class=\"token operator\">=</span><span class=\"token number\">69</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CHARSET</span><span class=\"token operator\">=</span>utf8mb4</pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">PARTITION</span> <span class=\"token keyword\">BY</span> RANGE <span class=\"token keyword\">COLUMNS</span><span class=\"token punctuation\">(</span>sta_date<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">PARTITION</span> p202401 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'2024-02-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">PARTITION</span> p202402 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'2024-03-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">PARTITION</span> p202403 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'2024-04-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">PARTITION</span> p202404 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'2024-05-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">PARTITION</span> p202405 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'2024-06-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">PARTITION</span> p202406 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'2024-07-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">PARTITION</span> p202407 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'2024-08-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">PARTITION</span> p202408 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'2024-09-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">PARTITION</span> p202409 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'2024-10-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">PARTITION</span> p202410 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'2024-11-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token keyword\">PARTITION</span> p202411 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'2024-12-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token keyword\">PARTITION</span> p202412 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'2025-01-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">PARTITION</span> p202501 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'2025-02-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token keyword\">PARTITION</span> p202502 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'2025-03-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">PARTITION</span> p202503 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'2025-04-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token keyword\">PARTITION</span> p202504 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'2025-05-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token keyword\">PARTITION</span> p202505 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'2025-06-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token keyword\">PARTITION</span> p202506 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'2025-07-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token keyword\">PARTITION</span> p202507 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'2025-08-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token keyword\">PARTITION</span> p202508 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'2025-09-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token keyword\">PARTITION</span> p202509 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'2025-10-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token keyword\">PARTITION</span> p202510 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'2025-11-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token keyword\">PARTITION</span> p202511 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'2025-12-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token keyword\">PARTITION</span> p202512 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'2026-01-01'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><ul>\n<li>PS : 以上四个表皆采用分区方式:\n<ol>\n<li>PARTITION BY RANGE COLUMNS (sta_date):  这表示使用基于日期范围的分区方式，并且以 sta_date 列作为分区列。</li>\n<li>PARTITION: 这是每个分区的开始定义。每个分区都有一个唯一的名称。</li>\n<li>VALUES LESS THAN ('date_value'): 这是定义分区的范围条件。每个分区根据指定的列的值进行划分，当列的值小于指定的日期值时，数据就会被放入该分区</li>\n</ol>\n</li>\n<li>分区方式一共有:\n<ul>\n<li>\n<p>范围分区（Range Partitioning）：根据列的范围值将数据分区。例如，根据日期范围将数据分为不同的分区。</p>\n</li>\n<li>\n<p>列表分区（List Partitioning）：根据列的离散值列表将数据分区。例如，根据地区列表将数据分为不同的分区。</p>\n</li>\n<li>\n<p>哈希分区（Hash Partitioning）：根据列值的哈希值将数据分区。哈希分区通常用于平均分配数据，避免某些分区数据量过大的情况。</p>\n</li>\n<li>\n<p>分区键分区（Partition Key Partitioning）：根据列值的某种特性进行分区，比如根据年份、月份等。</p>\n</li>\n<li>\n<p>范围 - 列表混合分区（Range-List Hybrid Partitioning）：结合了范围分区和列表分区的特性，先按范围进行分区，再在每个范围内根据列表进行二次分区。</p>\n</li>\n<li>\n<p>复合分区（Composite Partitioning）：使用多种分区方法的组合，例如先进行哈希分区，然后在每个哈希分区内再进行范围或列表分区。</p>\n</li>\n<li>\n<p>子分区（Subpartitioning）：在每个分区内再进行进一步的分区。可以与上述任何一种分区方式结合使用。</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<h1 id=\"代扣全景监控接口文档\"><a class=\"anchor\" href=\"#代扣全景监控接口文档\">#</a> 代扣全景监控接口文档</h1>\n<h2 id=\"定时统计加工数据-acct2debitper30minjob\"><a class=\"anchor\" href=\"#定时统计加工数据-acct2debitper30minjob\">#</a> 定时统计加工数据 Acct2DebitPer30MinJob</h2>\n<ul>\n<li>\n<p>涉及数据库表名</p>\n<ul>\n<li>pd_acct  <span class=\"label\">批扣明细表</span> <span class=\"label primary\">Oracle DB3</span></li>\n<li>pd_order <span class=\"label\">批扣订单表</span> <span class=\"label primary\">Oracle DB3</span></li>\n<li>fact_debit <span class=\"label\">代扣汇总表</span> <span class=\"label primary\">MySQL</span></li>\n</ul>\n</li>\n<li>\n<p>步骤</p>\n<ol>\n<li>查询退款中的代扣渠道</li>\n</ol>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">SELECT</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    t<span class=\"token punctuation\">.</span>pd_order_id<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    t<span class=\"token punctuation\">.</span>chan_no </pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">FROM</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    EMSS_PFC<span class=\"token punctuation\">.</span>pd_order t </pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">WHERE</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    ddct_strt_date <span class=\"token operator\">BETWEEN</span> to_date <span class=\"token punctuation\">(</span>今天开始时间<span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token operator\">AND</span> to_date <span class=\"token punctuation\">(</span>今天结束时间<span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token operator\">AND</span> <span class=\"token keyword\">EXISTS</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">SELECT</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token number\">1</span> </pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">FROM</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        EMSS_PFC<span class=\"token punctuation\">.</span>pd_acct a </pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">WHERE</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        a<span class=\"token punctuation\">.</span>in_trnst_ym <span class=\"token operator\">>=</span> 两个月前的日期 <span class=\"token punctuation\">(</span> yyyyMM <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>pd_order_id <span class=\"token operator\">=</span> t<span class=\"token punctuation\">.</span>pd_order_id </pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>fail_reason <span class=\"token operator\">=</span> <span class=\"token string\">'F00001'</span> </pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token operator\">AND</span> ddct_mode <span class=\"token operator\">=</span> <span class=\"token string\">'03'</span></pre></td></tr></table></figure><ol start=\"2\">\n<li>查询整合之后的 debit 信息</li>\n</ol>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> fact_debit <span class=\"token keyword\">where</span> sta_date <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>当前日期 yyyy<span class=\"token operator\">-</span>MM<span class=\"token operator\">-</span>dd<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><ol start=\"3\">\n<li>批量更新退款中代扣包数</li>\n</ol>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span>foreach collection<span class=\"token operator\">=</span><span class=\"token string\">\"list\"</span> separator<span class=\"token operator\">=</span><span class=\"token string\">\";\"</span> item<span class=\"token operator\">=</span><span class=\"token string\">\"fact\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">update</span> fact_debit</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token keyword\">set</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token operator\">&lt;</span><span class=\"token keyword\">if</span> test<span class=\"token operator\">=</span><span class=\"token string\">\"fact.outgoingCnt != null\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            outgoing_cnt <span class=\"token operator\">=</span> <span class=\"token comment\">#&#123;fact.outgoingCnt&#125;,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">if</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token operator\">&lt;</span><span class=\"token keyword\">if</span> test<span class=\"token operator\">=</span><span class=\"token string\">\"fact.outgoingUsersCnt != null\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            outgoing_users_cnt <span class=\"token operator\">=</span> <span class=\"token comment\">#&#123;fact.outgoingUsersCnt&#125;,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">if</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token operator\">&lt;</span><span class=\"token keyword\">if</span> test<span class=\"token operator\">=</span><span class=\"token string\">\"fact.outgoingReturnCnt != null\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            outgoing_return_cnt <span class=\"token operator\">=</span> <span class=\"token comment\">#&#123;fact.outgoingReturnCnt&#125;,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">if</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token operator\">&lt;</span><span class=\"token keyword\">if</span> test<span class=\"token operator\">=</span><span class=\"token string\">\"fact.debitSuccessRate != null\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            debit_success_rate <span class=\"token operator\">=</span> <span class=\"token comment\">#&#123;fact.debitSuccessRate&#125;,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">if</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token operator\">&lt;</span><span class=\"token keyword\">if</span> test<span class=\"token operator\">=</span><span class=\"token string\">\"fact.returnCnt != null\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            return_cnt <span class=\"token operator\">=</span> <span class=\"token comment\">#&#123;fact.returnCnt&#125;,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">if</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token operator\">&lt;</span><span class=\"token keyword\">if</span> test<span class=\"token operator\">=</span><span class=\"token string\">\"fact.debitsAmountMonth != null\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            debits_amount_month <span class=\"token operator\">=</span> <span class=\"token comment\">#&#123;fact.debitsAmountMonth&#125;,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">if</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token operator\">&lt;</span><span class=\"token keyword\">if</span> test<span class=\"token operator\">=</span><span class=\"token string\">\"fact.debitsCntMonth != null\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            debits_cnt_month <span class=\"token operator\">=</span> <span class=\"token comment\">#&#123;fact.debitsCntMonth&#125;,</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">if</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token operator\">&lt;</span><span class=\"token keyword\">if</span> test<span class=\"token operator\">=</span><span class=\"token string\">\"fact.updateTime != null\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            update_time <span class=\"token operator\">=</span> <span class=\"token comment\">#&#123;fact.updateTime&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">if</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">set</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token keyword\">where</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token operator\">&lt;</span><span class=\"token keyword\">if</span> test<span class=\"token operator\">=</span><span class=\"token string\">\"fact.staDate != null\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>            sta_date <span class=\"token operator\">=</span> <span class=\"token comment\">#&#123;fact.staDate&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">if</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token operator\">&lt;</span><span class=\"token keyword\">if</span> test<span class=\"token operator\">=</span><span class=\"token string\">\"fact.channelCode != null and fact.channelCode != ''\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>            <span class=\"token operator\">and</span> channel_code <span class=\"token operator\">=</span> <span class=\"token comment\">#&#123;fact.channelCode&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">if</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">where</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>foreach<span class=\"token operator\">></span></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"debitchart\"><a class=\"anchor\" href=\"#debitchart\">#</a> debitChart</h2>\n<ul>\n<li>数据库:\n<ul>\n<li>fact_debit 代扣汇总表</li>\n</ul>\n</li>\n<li>路径： /member/debitMonitor/debitChart</li>\n<li>HTTP 请求方式：post</li>\n</ul>\n<h3 id=\"趋势图\"><a class=\"anchor\" href=\"#趋势图\">#</a> 趋势图</h3>\n<ul>\n<li>factDebitMapper.getTrendChart<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token keyword\">if</span> test<span class=\"token operator\">=</span><span class=\"token string\">\"indexType != 'wkOrders95598Cnt' \"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token keyword\">select</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token operator\">&lt;</span>include refid<span class=\"token operator\">=</span><span class=\"token string\">\"debitChart\"</span><span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        f<span class=\"token punctuation\">.</span>sta_date</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">from</span> fact_debit f</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">where</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        f<span class=\"token punctuation\">.</span>sta_date <span class=\"token operator\">between</span> <span class=\"token comment\">#&#123;startDate&#125; and #&#123;endDate&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">group</span> <span class=\"token keyword\">by</span> f<span class=\"token punctuation\">.</span>sta_date</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">order</span> <span class=\"token keyword\">by</span> f<span class=\"token punctuation\">.</span>sta_date</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">if</span><span class=\"token operator\">></span></pre></td></tr></table></figure><figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token keyword\">if</span> test<span class=\"token operator\">=</span><span class=\"token string\">\"indexType == 'wkOrders95598Cnt' \"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token keyword\">select</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> index_value<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        f<span class=\"token punctuation\">.</span>sta_date</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">from</span> fact_debit_wk f</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">where</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        f<span class=\"token punctuation\">.</span>sta_date <span class=\"token operator\">between</span> <span class=\"token comment\">#&#123;startDate&#125; and #&#123;endDate&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">group</span> <span class=\"token keyword\">by</span> f<span class=\"token punctuation\">.</span>sta_date</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">order</span> <span class=\"token keyword\">by</span> f<span class=\"token punctuation\">.</span>sta_date</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">if</span><span class=\"token operator\">></span></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"wkorders95598cnt\"><a class=\"anchor\" href=\"#wkorders95598cnt\">#</a> wkOrders95598Cnt</h2>\n<ul>\n<li>\n<p>factDebitWkMapper.queryGroupByOrg</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">select</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        mgt_org_code<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> cnt</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">FROM</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        fact_debit_wk</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">WHERE</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        sta_date <span class=\"token operator\">=</span> <span class=\"token comment\">#&#123;staDate&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token keyword\">if</span> test<span class=\"token operator\">=</span><span class=\"token string\">\"mgtChannelCode != null and mgtChannelCode != ''\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token operator\">and</span> channel_code <span class=\"token operator\">=</span> <span class=\"token comment\">#&#123;mgtChannelCode&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">if</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        mgt_org_code</pre></td></tr></table></figure></li>\n<li>\n<p>factDebitWkMapper.queryGroupByChannel</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">select</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        channel_code<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> cnt</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">FROM</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        fact_debit_wk</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">WHERE</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        sta_date <span class=\"token operator\">=</span> <span class=\"token comment\">#&#123;staDate&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token keyword\">if</span> test<span class=\"token operator\">=</span><span class=\"token string\">\"mgtOrgCode != null and mgtOrgCode != ''\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token operator\">and</span> mgt_org_code <span class=\"token operator\">=</span> <span class=\"token comment\">#&#123;mgtOrgCode&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">if</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        channel_code</pre></td></tr></table></figure></li>\n<li>\n<p>json 数据文件</p>\n</li>\n</ul>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token property\">\"clientIp\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token property\">\"data\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token property\">\"serreqId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1000015500687989\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token property\">\"clientDepartment\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token property\">\"sendDate\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2024-03-25 10:21:24\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token property\">\"incidentType\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token property\">\"endYm\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token property\">\"replyMode\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token property\">\"idenMode\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token property\">\"specialType\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token property\">\"orgNo\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"324\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token property\">\"callingNo\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"19951955197\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token property\">\"planBeginTime\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token property\">\"bookingDepartment\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token property\">\"pubId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token property\">\"tel\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"19951955197\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token property\">\"isRepeat\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token property\">\"area\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"320100\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token property\">\"srvMode\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"01\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token property\">\"contactName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"女士\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token property\">\"bgnYm\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token property\">\"certNo\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token property\">\"contactAdd\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"J--江苏省南京市鼓楼区中山北路311号\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token property\">\"replyTel\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token property\">\"serviceBookingTime\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token property\">\"specialFlag\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token property\">\"tel2\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token property\">\"importantCustLevel\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token property\">\"cityCode\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"320100\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token property\">\"overTime\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token property\">\"msgId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"012024032504454579321011000015500657601\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token property\">\"busiTypeCode\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"018\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token property\">\"appNo\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2024032504454579\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token property\">\"remark\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token property\">\"tel3\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token property\">\"contactLists\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        <span class=\"token property\">\"reqFinishDate\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2024-03-25 10:20:25\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token property\">\"reqDate\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2024-03-25 10:13:38\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        <span class=\"token property\">\"keyType\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"026\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        <span class=\"token property\">\"tgName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"PMS_双门楼\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        <span class=\"token property\">\"mapAreaSite\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>        <span class=\"token property\">\"clientIdentity\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        <span class=\"token property\">\"handleOpinion\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>        <span class=\"token property\">\"custNo\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"3200154933998\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>        <span class=\"token property\">\"handleTime\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2024-03-25 10:21:24\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>        <span class=\"token property\">\"address\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>        <span class=\"token property\">\"repeatAppNo\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>        <span class=\"token property\">\"gertTypeCode\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>        <span class=\"token property\">\"empNo\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"03004399\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>        <span class=\"token property\">\"custName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"女士\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>        <span class=\"token property\">\"consOpinion\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>        <span class=\"token property\">\"interviewee\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>        <span class=\"token property\">\"countyCode\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>        <span class=\"token property\">\"elecAddr\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"J--江苏省南京市鼓楼区中山北路311号\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>        <span class=\"token property\">\"retvisitFlag\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"01\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>        <span class=\"token property\">\"recipient\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>        <span class=\"token property\">\"acceptContent\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"【客户侧用电需求配合】客户反映，户号3200155811961和3200154933998需要加急销户业务流程，微信中国银行不然后续产生了欠费不好代扣，加急，请尽快核实处理。\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>        <span class=\"token property\">\"planEndTime\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>        <span class=\"token property\">\"isIncident\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>        <span class=\"token property\">\"busiSubType\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0304\"</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>    <span class=\"token property\">\"serviceCode\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"00210791\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>    <span class=\"token property\">\"sm4KeyHexDigest\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>    <span class=\"token property\">\"source\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"01\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>    <span class=\"token property\">\"target\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"32101\"</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure>",
            "tags": [
                "项目熟悉"
            ]
        },
        {
            "id": "https://hk2012.github.io/2023/01/24/java/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/",
            "url": "https://hk2012.github.io/2023/01/24/java/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/",
            "title": "jvm面试题整理",
            "date_published": "2023-01-24T07:48:53.000Z",
            "content_html": "<h2 id=\"jvm底层面试题\"><a class=\"anchor\" href=\"#jvm底层面试题\">#</a> JVM 底层面试题</h2>\n<ol>\n<li>\n<p>说一说 JVM 主要组成部分及其作用<br />\n 1.1. class loader: 类加载器，加载类文件到内存，class loader 只管加载，只要符合文件结构就加载，至于能否运行，它不负责（由 execution engine 负责）<br />\n1.2. execution engine: 执行引擎或解释器，负责解释命令，交由操作系统执行<br />\n 1.3. native interface：本地接口，本地接口的作用是融合不同的语言为 java 所用。<br />\n1.4. runtimeDate area: 运行数据区，这是 jvm 的重点，我们所写的程序都被加载到这里，之后才开始运行。<br />\n- 1.4.1. java virtual machine stacks: 栈也叫栈内存，是 java 程序的运行区，是在线程创建时创建，他的生命周期跟随线程的生命周期，线程结束时，栈内存释放；<br />\n- 1.4.2. 堆内存：一个 JVM 实例只存在一个堆内存，堆内存的大小是可以调节的<br />\n - 1.4.3. program counter register: 程序计数器 当前线程所执行的字节码的行号指示器，字节码解析器的工作是通过改变这个计数器的值，来选取下一条需要执行的字节码指令，</p>\n<p>1.5. 组件作用：通过 class loader 将 java 代码转换成字节码，（runtime data area）再把字节码加载到内存中，而字节码文件只是 JVM 的一套指令集规范，并不能直接交给操作系统执行，因此还需要特定命令的执行引擎（execution engine）, 将字节码翻译成底层系统指令，再交由 CPU 执行，而这个过程中需要调用其他语言的本地库接口（Native Interface）来实现整个程序的功能。</p>\n</li>\n<li>\n<p>说一下 JVM 运行时数据区<br />\n程序计数器（Program Counter Register）：当前线程所执行的字节码的行号指示器，字节码解析器的工作是通过改变这个计数器的值，来选取下一条需要执行的字节码指令，分支、循环、跳转、异常处理、线程恢复等基础功能，都需要依赖这个计数器来完成；<br />\nJava 虚拟机栈（Java Virtual Machine Stacks）：用于存储局部变量表、操作数栈、动态链接、方法出口等信息；<br />\n本地方法栈（Native Method Stack）：与虚拟机栈的作用是一样的，只不过虚拟机栈是服务 Java 方法的，而本地方法栈是为虚拟机调用 Native 方法服务的；<br />\nJava 堆（Java Heap）：Java 虚拟机中内存最大的一块，是被所有线程共享的，几乎所有的对象实例都在这里分配内存；<br />\n方法区（Methed Area）：用于存储已被虚拟机加载的类信息、常量、静态变量、即时编译后的代码等数据。</p>\n</li>\n</ol>\n<p>总结下来</p>\n<ul>\n<li>spring 是核心，提供了基础功能</li>\n<li>springmvc 是基于 spring mvc 框架</li>\n<li>springboot 是为了简化 spring 配置的快速开发整合包</li>\n<li>spring cloud 是构建在 spring boot 之上的服务治理框架</li>\n</ul>\n",
            "tags": [
                "总结"
            ]
        }
    ]
}